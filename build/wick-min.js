var wick=function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);var i={};s.r(i),s.d(i,"Lex",function(){return H}),s.d(i,"Lexer",function(){return a}),s.d(i,"Tokenizer",function(){return c}),s.d(i,"months",function(){return A}),s.d(i,"dow",function(){return C}),s.d(i,"QBezier",function(){return P}),s.d(i,"CBezier",function(){return V}),s.d(i,"TurnQueryIntoData",function(){return m}),s.d(i,"TurnDataIntoQuery",function(){return p}),s.d(i,"GetDayStartAndEnd",function(){return L}),s.d(i,"TouchScroller",function(){return z}),s.d(i,"float24to12ModTime",function(){return S});var n={};s.r(n),s.d(n,"AnimCore",function(){return ct}),s.d(n,"TransformTo",function(){return lt}),s.d(n,"Color",function(){return it});const r={type:"",text:""};class a{constructor(t){for(this.tk=t,this.token=t.next(),this.hold=null;this.token&&("new_line"===this.token.type||"white_space"===this.token.type||"generic"===this.token.type);)this.token=this.tk.next()}next(){if(null!==this.hold)return this.token=this.hold,this.hold=null,this.token;if(!this.token)return null;do{this.token=this.tk.next()}while(this.token&&("new_line"===this.token.type||"white_space"===this.token.type||"generic"===this.token.type));return this.token?this.token:null}assert(t){if(!this.token)return!1;var e=this.token.text==t;return e&&this.next(),e}peek(){if(this.hold)return this.hold;if(this.hold=this.tk.next(),!this.hold)return r;for(;this.hold&&("new_line"===this.hold.type||"white_space"===this.hold.type||"generic"===this.hold.type);)this.hold=this.tk.next();return this.hold?this.hold:r}}function o(t){for(var e=arguments,s=1,i=e.length;s<i;s++)if(e[s]===t)return!0;return!1}function h(t){return t>arguments[1]&&t<arguments[2]}var l=function(){var t=[{type:"number",check:(t,e)=>h(t,47,58)?o(t=e.charCodeAt(1),66,98,88,120,79,111)?2:1:46==t&&h(t=e.charCodeAt(1),47,58)?2:0,scanToEnd:t=>h(t,47,58)||46===t?-1:0,format(t){t.color="rgb(20,40,180)"}},{type:"identifier",check:t=>h(t,64,91)||h(t,96,123)?1:0,scanToEnd:t=>h(t,47,58)||h(t,64,91)||h(t,96,123)||o(t,35,36,45,95)?-1:0,format(t){}},{type:"string",check:(t,e)=>34===t?1:0,scanToEnd:t=>34===t?1:-1,format(t){}},{type:"white_space",check:t=>32===t||9===t?1:0,scanToEnd:t=>32===t||9===t?-1:0,format(t){}},{type:"new_line",check:t=>10===t?1:0,scanToEnd:t=>0,format(t){}},{type:"open_bracket",check:t=>o(t,123,40,91)?1:0,scanToEnd:t=>0,format(t){t.color="rgb(100,100,100)"}},{type:"close_bracket",check:t=>o(t,125,41,93)?1:0,scanToEnd:t=>0,format(t){t.color="rgb(100,100,100)"}},{type:"Operator",check:t=>o(t,42,43,60,61,62,92,38,37,33,94,124,58)?1:0,scanToEnd:t=>0,format(t){t.color="rgb(205,120,0)"}},{type:"Symbol",check:t=>1,scanToEnd:t=>0,format(t){t.color="red"}}];return t.clone=function(){return l()},t},d=l(),u=d.length;class c{constructor(t){this.h=null,this.line=0,this.char=0,this.offset=0,this.string=t}hold(t){this.h=t}next(){var t=0;if(this.h){var e=this.h;return this.h=null,e}if(this.string.length<1)return null;var s=this.string.charCodeAt(0);let i;for(var n=0;n<u;n++){let e=(i=d[n]).check(s,this.string);if(e>0){this.type=i.type;var r=0;for(n=e;n<this.string.length&&!((r=i.scanToEnd(this.string.charCodeAt(n)))>-1);n++)r=0;t=n+r;break}}var a=this.string.slice(0,t);this.string=this.string.slice(t),"new_line"===i.type&&(this.char=0,this.line++);var o={type:i.type,text:a,pos:this.offset,length:t,char:this.char,line:this.line};return this.offset+=t,this.char+=t,o}}function p(t){var e="";if(arguments.length>1){for(var s=0;s<arguments.length;s++)if((t=arguments[s]).component){var i=`${t.component}&`;for(var n in t)i+="component"!=n?`${n}=${t[n]}&`:"";e+=i.slice(0,-1)+"."}}else for(var n in t)e+=`${n}=${t[n]}&`;return e.slice(0,-1)}function m(t){var e={};let s=t.split(".");return s.length>0?s.forEach(t=>{var s={};t.length>1&&t.split("&").forEach((t,i)=>{if(i<1)e[t]=s;else{let s=t.split("=");e[s[0]]=s[1]}})}):t.split("&").forEach(t=>{let s=t.split("=");e[s[0]]=s[1]}),e}class _{constructor(t){this.path=t.pathname,this.host=t.hostname,this.query=function(t){let e=new Map;if(!t instanceof String)return console.warn("query argument provided is not a string!"),e;function s(t,e){let s;for(;(s=t.token)&&"&"!==s.text;){if("="!=t.peek().text)return;{let i=s.text;t.next(),t.next();let n=t.token;e.set(i,"number"==n.type?parseFloat(n.text):n.text),t.next(),t.next()}}}function i(t,e){let i;return!(!(i=t.peek())||"&"!=i.text||(i=t.token,t.next(),t.next(),e.set(i.text,new Map),s(t,e.get(i.text)),0))}return"?"==t[0]&&(t=t.slice(1)),function(t,e){for(e.set(null,new Map),"&"==t.peek().text?i(t,e):s(t,e.get(null));t.token&&"&"==t.token.text;)t.next(),i(t,e)}(new a(new c(t)),e),e}(t.search.slice(1))}setPath(t){this.path=t,this.setLocation()}setLocation(){history.replaceState({},"replaced state",`${this}`),window.onpopstate()}toString(){return`${this.path}?${function(t){let e,s="";if(e=t.get(null)){if(e.length>0)for(let[t,i]of e.entries())s+=`&${t}=${i}`;for(let[e,i]of t.entries())if(null!=e){s+=`&${e}`;for(let[t,e]of i.entries())s+=`&${t}=${e}`}return s.slice(1)}return s}(this.query)}`}getClass(t){t||(t=null);let e,s={};if(e=this.query.get(t))for(let[t,i]of e.entries())s[t]=i;return s}set(t,e,s){t||(t=null),this.query.has(t)||this.query.set(t,new Map),this.query.get(t).set(e,s),this.setLocation()}get(t,e){t||(t=null);let s=this.query.get(t);return s?s.get(e):null}}class f{constructor(){this.next=null,this.model=null}destructor(){this.model&&this.model.removeView(this)}update(t){}removed(t){}added(t){}setModel(t){}reset(){}unsetModel(){this.next=null,this.model=null}}class g{constructor(){this.first_view=null}destructor(){for(var t=this.first_view;t;)t.unsetModel(),t=t.next;this.first_view=null}get(){return{}}addView(t){if(!(t instanceof f))throw new Exception("Passed in view is not an instance of wick.View!");t.model&&t.model.removeView(t);for(var e=this.first_view;e;){if(t==e)return;e=e.next}t.model=this,t.next=this.first_view,this.first_view=t,t.model=this,this._temp_data_||(this._temp_data_=this.get()),t.setModel(this),t.update(this.get())}removeView(t){if(t instanceof f&&t.model==this)for(var e=this.first_view,s=null;e;){if(t==e)return s?s.next=t.next:this.first_view=t.next,t.next=null,t.model=null,void t.reset();s=e,e=e.next}console.warn("View not a member of Model!",t)}updateViews(t){for(var e=this.first_view;e;)e.update(t),e=e.next}updateViewsRemoved(t){for(var e=this.first_view;e;)e.removed(t),e=e.next}updateViewsAdded(t){for(var e=this.first_view;e;)e.added(t),e=e.next}}class w{parse(t){return t}verify(t,e){e.valid=!0}filter(){return!0}string(t){return t+""}}class y extends Array{constructor(){super()}push(t){t instanceof Array?t.forEach(t=>{this.push(t)}):super.push(t)}__setFilters__(){}}let v=()=>{},x=[];class k extends g{constructor(t){super(),this.source=null,this.first_link=null,this.next=null,this.prev=null,this.pin=v,this.__filters__=x,this.schema=t||this.constructor.schema||{},this.schema.parser&&this.schema.parser instanceof w?this.parser=this.schema.parser:this.parser=new w,this.id="",this.schema.identifier&&"string"==typeof this.schema.identifier&&(this.id=this.schema.identifier)}destructor(){this.schema=null,this.__filters__=null,this.source&&this.source.__unlink__(this),super.destructor()}get length(){return 0}set length(t){}__defaultReturn__(t){if(t)return new y;let e=new this.constructor(this.schema);return this.__link__(e),e}push(t){return this.insert(t,!0)}get(t,e=!1,s){null===t&&(e=!0);let i=null,n=!0;if(t?s?i=s:(null===s&&(n=!1),this.source||(n=!1),(i=this.__defaultReturn__(n)).__setFilters__(t)):i=this.__defaultReturn__(n),t){let s=t;!t instanceof Array&&(s=[t]),this.__get__(s,i,e)}else this.__getAll__(i,e);return i}insert(t,e=!1){let s=this.first_view?[]:null,i=!1;if(!e&&this.source)return this.source.insert(t);if(t instanceof Array)for(var n=0;n<t.length;n++)this.__insertSub__(t[n],i,s)&&(i=!0);else t&&(i=this.__insertSub__(t,i,s));return s&&s.length>0&&this.updateViewsAdded(s),i}__insertSub__(t,e,s){let i=t;var n=this.__getIdentifier__(t);return void 0!=n&&(i instanceof this.schema.model||(i=i.____self____)||(i=new this.schema.model).add(t),(n=this.__getIdentifier__(i,this.__filters__))&&(e=this.__insert__(i,s,n),this.__linksInsert__(i))),e}remove(t,e=!1){if(!e&&this.source)return this.source.remove(t);let s=[];if(t){let e=t;!t instanceof Array&&(e=[t]),this.__remove__(e,s,UNWRAPPED)}else this.__removeAll__();return this.__linksRemove__(terms),s}__unlink__(t){t instanceof k&&t.source==this&&(t==this.first_link&&(this.first_link=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next),t.source=null)}__link__(t){t instanceof k&&!t.source&&(t.source=this,t.next=this.first_link,this.first_link&&(this.first_link.prev=t),this.first_link=t,t.pin=(t=>{let e=setTimeout(()=>{t.__unlink__()},50);return()=>{clearTimeout(e),t.source||console.warn("failed to clear the destruction of container in time!")}})(t))}__linksRemove__(t){let e=this.first_link;for(;e;)e.remove(t,!0),e=e.next}__linksInsert__(t){let e=this.first_link;for(;e;)e.insert(t,!0),e=e.next}cull(t){let e={},s=__getAll__([],!0),i=t=>{if(t instanceof Array)return t.forEach(t=>i(t));let s=this.__getIdentifier__(t);s&&(e[s]=t)};i(t);for(let t=0;t<s.lenth;t++){let e=s[t];s[this.__getIdentifier__(e)]||this.__remove__(e)}this.insert(t)}__setFilters__(t){t instanceof Array?this.__filters__=this.__filters__.concat(t):this.__filters__.push(t)}__filterIdentifier__(t,e){return!(e.length>0)||this.parser.filter(t,e)}__getIdentifier__(t,e=null){let s=null;return s=t.data&&t.schema?t.data[this.schema.identifier]:t[this.schema.identifier]||t,e?this.__filterIdentifier__(s,e)?s:void 0:s}__insert__(t,e,s){return!1}__get__(t,e,s=!1){return e}__getAll__(t,e=!1){return t}__removeAll__(){return[]}__remove__(t){return[]}}class b extends k{constructor(t){super({identifier:"indexed",model:t.model}),this.schema=t,this.indexes={},this.first_index=null,this.addIndex(t.index)}get length(){return this.first_index.length}addIndex(t){for(let e in t){let s=t[e];s.container&&!this.indexes[e]&&(this.indexes[e]=new s.container(s.schema),this.first_index?this.indexes[e].insert(this.first_index.__getAll__()):this.first_index=this.indexes[e])}}get(t,e=!1,s){let i={};if(t)for(let n in t)this.indexes[n]&&(i[n]=this.indexes[n].get(t[n],e,s));else i=this.first_index.get(null,e);return i}remove(t){var e=[];for(let s in t)this.indexes[s]&&(e=e.concat(this.indexes[s].remove(t[s])));for(var s=0;s<this.indexes.length;s++)for(var i=0;i<e.length;i++)this.indexes[s].remove(e[i]);return e.length>0&&this.updateViewsRemoved(e),e}__insert__(t,e,s){let i=!1;for(let e in this.indexes)this.indexes[e].insert(t)&&(i=!0);return i&&this.updateViews(this.first_index.get()),i}__remove__(t){let e=!1;for(let s in this.indexes)this.indexes[s].remove(t)&&(e=!0);return e}__removeAll__(){let t=!1;for(let e in this.indexes)index.__removeAll__()&&(t=!0);return t}__getIdentifier__(t,e=null){return!0}}class E extends k{constructor(t){super(t),this.data=[]}destructor(){this.data=null,super.destructor()}get length(){return this.data.length}__defaultReturn__(){if(this.source)return new y;let t=new E(this.schema);return this.__link__(t),t}__insert__(t,e,s){for(var i=0,n=this.data.length;i<n;i++){var r=this.data[i];if(this.__getIdentifier__(r)==s)return r.add(t),!1}return this.data.push(t),e&&e.push(t),!0}__get__(t,e,s=!1){let i=null;if(i=t instanceof Array?t:[t],s)for(let t=0,s=this.data.length;t<s;t++){let s=this.data[t];this.__getIdentifier__(s,i)&&e.push(s)}else for(let t=0,s=this.data.length;t<s;t++){let s=this.data[t];this.__getIdentifier__(s,i)&&e.push(s.get())}return e}__getAll__(t,e=!1){return e?this.data.forEach(e=>{t.push(e)}):this.data.forEach(e=>{t.push(e.get())}),t}__removeAll__(){let t=this.data.map(t=>t)||[];return this.data.length=0,t}__remove__(t){if(this.__getIdentifier__(t))for(var e=0,s=this.data.length;e<s;e++){var i=this.data[e];if(this.__getIdentifier__(i)==this.__getIdentifier__(t))return this.data.splice(e,1),[i]}return[]}}class T extends k{constructor(t){super(t),this.root=null,this.min=10,this.max=20,this.size=0}destructor(){this.root&&this.root.destructor(),super.destructor()}get length(){return this.size}__insert__(t,e,s){let i={added:!1};return this.root||(this.root=new M(!0)),this.root=this.root.insert(s,t,this.max,!0,i).newnode,e&&e.push(t),i.added&&this.size++,i.added}__get__(t,e,s=!1){if(this.root&&t.length>0)if(1==t.length)this.root.get(parseFloat(t[0]),parseFloat(t[0]),e,s);else if(t.length<3)this.root.get(parseFloat(t[0]),parseFloat(t[1]),e,s);else for(let i=0,n=t.length-1;i>n;i+=2)this.root.get(parseFloat(t[i]),parseFloat(t[i+1]),e,s);return e}__remove__(t){let e=!1;if(this.root&&t.length>0)if(1==t.length){let s=this.root.remove(t[0],t[0],!0,this.min);e=!!s.out||e,this.root=s.out_node}else if(t.length<3){let s=this.root.remove(t[0],t[1],!0,this.min);e=!!s.out||e,this.root=s.out_node}else for(let s=0,i=t.length-1;s>i;s+=2){let i=this.root.remove(t[s],t[s+1],!0,this.min);e=!!i.out||e,this.root=i.out_node}return e&&this.size--,e}__getAll__(t,e=!1){return this.root&&this.root.get(-1/0,1/0,t,e),t}__removeAll__(){this.root&&this.root.destructor(),this.root=null}}class M{constructor(t=!1){this.LEAF=t,this.nodes=[],this.keys=[],this.items=0}destructor(){if(this.nodes=null,this.keys=null,!this.LEAF)for(let t=0,e=this.nodes.length;t<e;t++)this.nodes[t].destructor()}balanceInsert(t,e=!1){if(this.keys.length>=t){let s=new M(this.LEAF),i=t>>1|0,n=this.keys[i],r=this.keys.slice(0,i),a=this.nodes.slice(0,this.LEAF?i:i+1),o=this.keys.slice(this.LEAF?i:i+1),h=this.nodes.slice(this.LEAF?i:i+1);if(s.keys=o,s.nodes=h,this.keys=r,this.nodes=a,e){let t=new M;return t.keys.push(n),t.nodes.push(this,s),{newnode:t,key:n}}return{newnode:s,key:n}}return{newnode:this,key:0}}insert(t,e,s,i=!1,n){let r=this.keys.length;if(this.LEAF){for(let r=0,a=this.keys.length;r<a;r++){let a=this.keys[r];if(t==a)return this.nodes[r].add(a),n.added=!1,{newnode:this,key:t};if(t<a)return this.keys.splice(r,0,t),this.nodes.splice(r,0,e),n.added=!0,this.balanceInsert(s,i)}return this.keys.push(t),this.nodes.push(e),n.added=!0,this.balanceInsert(s,i)}{for(var a=0;a<r;a++)if(t<this.keys[a]){let r=this.nodes[a],o=r.insert(t,e,s,!1,n),h=o.key,l=o.newnode;return l!=r&&(this.keys.splice(a,0,h),this.nodes.splice(a+1,0,l)),this.balanceInsert(s,i)}let o=this.nodes[a],{newnode:h,key:l}=o.insert(t,e,s,!1,n);return h!=o&&(this.keys.push(l),this.nodes.push(h)),this.balanceInsert(s,i)}}balanceRemove(t,e){let s=this.nodes[t-1],i=this.nodes[t+1],n=this.nodes[t];if(s&&s.keys.length>e){let e=s.keys.length,i=s.nodes.length;return n.keys.unshift(n.LEAF?s.keys[e-1]:this.keys[t-1]),n.nodes.unshift(s.nodes[i-1]),this.keys[t-1]=s.keys[e-1],s.keys.length=e-1,s.nodes.length=i-1,!1}if(i&&i.keys.length>e)return n.keys.push(n.LEAF?i.keys[0]:this.keys[t]),n.nodes.push(i.nodes[0]),i.keys.splice(0,1),i.nodes.splice(0,1),this.keys[t]=n.LEAF?i.keys[1]:i.keys[0],!1;{s||(t++,s=n,n=i);let e=this.keys[t-1];if(this.keys.splice(t-1,1),this.nodes.splice(t,1),s.nodes=s.nodes.concat(n.nodes),s.LEAF||s.keys.push(e),s.keys=s.keys.concat(n.keys),s.LEAF)for(let t=0;t<s.keys.length;t++)s.keys[t],s.nodes[t].id;return!0}}remove(t,e,s=!1,i){let n=this.keys.length,r=!1,a=this;if(this.LEAF)for(let s=0,i=this.keys.length;s<i;s++){let n=this.keys[s];n<=e&&n>=t&&(r=!0,this.keys.splice(s,1),this.nodes.splice(s,1),i--,s--)}else{for(var o=0;o<n;o++)t<=this.keys[o]&&this.nodes[o].remove(t,e,!1,i).out&&(r=!0);for(this.nodes[o].remove(t,e,!1,i).out&&(r=!0),o=0;o<this.nodes.length;o++)this.nodes[o].keys.length<i&&this.balanceRemove(o,i)&&(n--,o--);1==this.nodes.length&&(a=this.nodes[0])}return{out_node:a,out:r}}get(t,e,s,i){if(!t||!e)return!1;if(this.LEAF)for(let n=0,r=this.keys.length;n<r;n++){let r=this.keys[n];r<=e&&r>=t&&(i?s.push(this.nodes[n]):s.push(this.nodes[n].get()))}else{for(var n=0,r=this.keys.length;n<r;n++)t<=this.keys[n]&&this.nodes[n].get(t,e,s,i);this.nodes[n].get(t,e,s,i)}}}const A=[{name:"January",days:31,day_offset:0,day_offse_leapt:0},{name:"February",days:28,day_offset:31,day_offset_leap:31},{name:"March",days:31,day_offset:59,day_offset_leap:60},{name:"April",days:30,day_offset:90,day_offset_leap:91},{name:"May",days:31,day_offset:120,day_offset_leap:121},{name:"June",days:30,day_offset:151,day_offset_leap:152},{name:"July",days:31,day_offset:181,day_offset_leap:182},{name:"August",days:31,day_offset:212,day_offset_leap:213},{name:"September",days:30,day_offset:243,day_offset_leap:244},{name:"October",days:31,day_offset:273,day_offset_leap:274},{name:"November",days:30,day_offset:304,day_offset_leap:305},{name:"December",days:31,day_offset:33,day_offse_leapt:335}];var C=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function L(t){var e={start:0,end:0};if(t instanceof Date||"number"==typeof t){var s=new Date(t);s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0),e.start=s.valueOf(),s.setDate(s.getDate()+1),s.setSeconds(-1),e.end=s.valueOf()}return e}function S(t,e){var s=t>=12&&t<24;return((0|t)%12!=0?(0|t)%12:12)+":"+("0"+(t%1*60|0)).slice(-2)+(s?e?"PM":"pm":e?"AM":"am")}class I extends Float64Array{constructor(t,e){if(super(2),"number"==typeof t)return this[0]=t,void(this[1]=e);t instanceof Array&&(this[0]=t[0],this[1]=t[1])}draw(t,e=1){t.beginPath(),t.moveTo(this.x*e,this.y*e),t.arc(this.x*e,this.y*e,.01*e,0,2*Math.PI),t.stroke()}get x(){return this[0]}set x(t){"number"==typeof t&&(this[0]=t)}get y(){return this[1]}set y(t){"number"==typeof t&&(this[1]=t)}}function D(t,e,s,i){var n=1-t;return n*n*e+2*n*t*s+t*t*i}function O(t,e,s){var i={a:1/0,b:1/0},n=t-2*e+s,r=2*(e-t),a=t;return 0==r||(Math.abs(n)<5e-11?i.a=-a/r:(i.a=(-r-Math.sqrt(r*r-4*n*a))/(2*n),i.b=(-r+Math.sqrt(r*r-4*n*a))/(2*n))),i}class P{constructor(t,e,s,i,n,r){return this.x1=0,this.x2=0,this.x3=0,this.y1=0,this.y2=0,this.y3=0,"number"==typeof t?(this.x1=t,this.x2=s,this.x3=n,this.y1=e,this.y2=i,void(this.y3=r)):t instanceof P?(this.x1=t.x1,this.x2=t.x2,this.x3=t.x3,this.y1=t.y1,this.y2=t.y2,void(this.y3=t.y3)):t instanceof Array?(this.x1=t[0],this.y1=t[1],this.x2=t[2],this.y2=t[3],this.x3=t[4],void(this.y3=t[5])):void 0}reverse(){return new P(this.x3,this.y3,this.x2,this.y2,this.x1,this.y1)}point(t){return new I(D(t,this.x1,this.x2,this.x3),D(t,this.y1,this.y2,this.y3))}tangent(t){var e={x:0,y:0},s=this.x2-this.x1,i=this.y2-this.y1,n=this.x3-this.x2,r=this.y3-this.y2;return e.x=(1-t)*s+t*n,e.y=(1-t)*i+t*r,e}toArray(){return[this.x1,this.y1,this.x2,this.y2,this.x3,this.y3]}split(t){return function(t,e){var s=[],i=[];return function t(e,n){if(2==e.length)s.push(e[0],e[1]),i.push(e[0],e[1]);else{for(var r=[],a=0;a<e.length-2;a+=2)0==a&&s.push(e[a],e[a+1]),a==e.length-4&&i.push(e[a+2],e[a+3]),r.push((1-n)*e[a]+n*e[a+2]),r.push((1-n)*e[a+1]+n*e[a+3]);t(r,n)}}(t,e),{x:new P(i),y:new P(s)}}(this.toArray(),t)}rootsX(){return this.roots(this.x1,this.x2,this.x3)}roots(t,e,s){this.toArray();var i=t-2*e+s,n=2*(e-t),r=t,a=2*r;console.log(i," c");var o=Math.sqrt(n*n-4*r*i);return console.log(o,n,a,s),[(-n+o)/a,(-n-o)/a]}rootsa(){var t=this.toArray(),e=t[1],s=t[3],i=t[5],n=t[0],r=t[2],a=2*(s-e),o=2*(r-n);return[-a/(2*(i-s)-a),-o/(-o+2*(t[4]-r))]}boundingBox(){var t=curve[0],e=curve[1],s=curve[2],i=curve[3],n=curve[4],r=curve[5],a=getRootsClamped(curve);return{min:{x:Math.min(t,s,n,a.y[0]||1/0,a.x[0]||1/0),y:Math.min(e,i,r,a.y[1]||1/0,a.x[1]||1/0)},max:{x:Math.max(t,s,n,a.y[0]||-1/0,a.x[0]||-1/0),y:Math.max(e,i,r,a.y[1]||-1/0,a.x[1]||-1/0)}}}rotate(t,e){t=t/180*Math.PI;for(var s=this.toArray(),i=0;i<6;i+=2){var n=curve[i]-e.x,r=curve[i+1]-e.y;s[i]=n*Math.cos(t)-r*Math.sin(t)+e.x,s[i+1]=n*Math.sin(t)+r*Math.cos(t)+e.y}return new P(s)}intersects(){return{x:O(this.x1,this.x2,this.x3),y:O(this.y1,this.y2,this.y3)}}add(t,e){if("number"==typeof t)return new P(this.x1+t,this.y1+e,this.x2+t,this.y2+e,this.x3+t,this.y3+e)}}const F=Math.sqrt,N=Math.cos,$=Math.acos,q=Math.PI;function R(t){return t<0?-Math.pow(-t,1/3):Math.pow(t,1/3)}function U(t,e,s,i,n){var r=1-t,a=r*r,o=t*t;return r*a*e+3*a*t*s+3*o*r*i+o*t*n}Math.sin;class V extends Float64Array{constructor(t,e,s,i,n,r,a,o){return super(8),4==arguments.length?(this[0]=0,this[1]=0,this[2]=t,this[3]=e,this[4]=s,this[5]=i,this[6]=1,void(this[7]=1)):"number"==typeof t?(this[0]=t,this[1]=e,this[2]=s,this[3]=i,this[4]=n,this[5]=r,this[6]=a,void(this[7]=o)):t instanceof Array?(this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],void(this[7]=t[4])):void 0}get x1(){return this[0]}set x1(t){this[0]=t}get x2(){return this[2]}set x2(t){this[2]=t}get x3(){return this[4]}set x3(t){this[4]=t}get x4(){return this[6]}set x4(t){this[6]=t}get y1(){return this[1]}set y1(t){this[1]=t}get y2(){return this[3]}set y2(t){this[3]=t}get y3(){return this[5]}set y3(t){this[5]=t}get y4(){return this[7]}set y4(t){this[7]=t}add(t,e=0){return new CCurve(this[0]+t,this[1]+e,this[2]+t,this[3]+e,this[4]+t,this[5]+e,this[6]+t,this[7]+e)}valY(t){return U(t,this[1],this[3],this[5],this[7])}valX(t){return U(t,this[0],this[2],this[4],this[6])}point(t){return new I(U(t,this[0],this[2],this[4],this[6]),U(t,this[1],this[3],this[5],this[7]))}roots(t,e,s,i){var n,r,a,o=3*e-t-3*s+i,h=(3*t-6*e+3*s)/o,l=(-3*t+3*e)/o,d=(3*l-h*h)/3,u=(2*h*h*h-9*h*l+t/o*27)/27,c=u/2,p=c*c+(s=d/3)*s*s;if(p<0){var m=-d/3,_=F(m*m*m),f=-u/(2*_),g=$(f<-1?-1:f>1?1:f),w=2*R(_);return r=w*N(g/3)-h/3,a=w*N((g+2*q)/3)-h/3,[w*N((g+4*q)/3)-h/3,r,a]}if(0===p)return[a=-(n=c<0?R(-c):-R(c))-h/3,r=2*n-h/3];var y=F(p);return[r=(n=R(y-c))-R(y+c)-h/3]}rootsY(){return this.roots(this[1],this[3],this[5],this[7])}rootsX(){return this.roots(this[0],this[2],this[4],this[6])}getYatX(t){var e,s=this[0]-t,i=this[2]-t,n=3*i,r=3*s,a=3*(this[4]-t),o=1/(-s+n-a+(this[6]-t)),h=(r-6*i+a)*o,l=(-r+n)*o,d=1/3*(3*l-h*h),u=d*(1/3),c=1/27*(2*h*h*h-9*h*l+s*o*27),p=.5*c,m=p*p+u*u*u;if(m<0){var _=-d/3,f=F(_*_*_),g=-c/(2*f),w=$(g<-1?-1:g>1?1:g);e=2*R(f)*N((w+4*q)/3)-h/3}else if(0===m)e=-(p<0?R(-p):-R(p))-h*(1/3);else{var y=F(m);e=R(y-p)-R(y+p)-h*(1/3)}return U(e,this[1],this[3],this[5],this[7])}draw(t,e=1){t.beginPath(),t.moveTo(this[0]*e,this[1]*e),t.bezierCurveTo(this[2]*e,this[3]*e,this[4]*e,this[5]*e,this[6]*e,this[7]*e),t.stroke()}}class z{constructor(t,e=.02,s=0){this.origin_x=0,this.origin_y=0,this.velocity_x=0,this.velocity_y=0,this.GO=!0,this.drag=e>0?e:.02,this.element=t,!s instanceof Number&&(s=0);let i=0,n=(t,e,s,i=1)=>{let r=this.drag;t-=t*r*s*i,e-=e*r*s*i;let a=Math.max(Math.abs(e),Math.abs(e)),o=!(s>0&&a>.1&&this.GO);o||requestAnimationFrame(()=>{n(t,e,1)}),o=o&&0!=s;for(var h=0,l=this.listeners.length;h<l;h++)this.listeners[h]({dx:t,dy:e,end:o})&&(this.GO=!1)};this.event_b=(t=>{i=performance.now();var e=t.touches[s];this.velocity_x=this.origin_x-e.clientX,this.velocity_y=this.origin_y-e.clientY,this.origin_x=e.clientX,this.origin_y=e.clientY,n(this.velocity_x,this.velocity_y,0,0)}),this.event_c=(t=>{let e=performance.now()-i,s=Math.min(e/8.6666666,1/this.drag);this.GO=!0,n(this.velocity_x,this.velocity_y,s),this.velocity_x=0,this.velocity_y=0,window.removeEventListener("touchmove",this.event_b),window.removeEventListener("touchend",this.event_c)}),this.event_a=(t=>{if(!this.GO)return t.preventDefualt(),t.stopPropagation(),!1;i=performance.now(),this.GO=!1;var e=t.touches[s];e&&(this.origin_y=e.clientY,this.origin_x=e.clientX,window.addEventListener("touchmove",this.event_b),window.addEventListener("touchend",this.event_c))}),this.element.addEventListener("touchstart",this.event_a),this.listeners=[]}destructor(){this.listeners=null,this.element.removeEventListener("touchstart",this.event_a)}addEventListener(t){if(t instanceof Function){for(var e=0;e<this.listeners.length;e++)if(this.listeners[e]==t)return;this.listeners.push(t)}}removeEventListener(t){for(var e=0;e<this.listeners.length;e++)if(this.listeners[e]==t)return void this.listeners.splice(e,1)}}function H(t){return"string"!=typeof t?(console.warn("Cannot create a lexer on a non-string object!"),null):new a(new c(t))}Element.prototype.getWindowTop=function(){return this.offsetTop+(this.parentElement?this.parentElement.getWindowTop():0)},Element.prototype.getWindowLeft=function(){return this.offsetLeft+(this.parentElement?this.parentElement.getWindowLeft():0)},Element.prototype.getParentWindowTop=function(t=!1){return(t?this.offsetTop:0)+(this.parentElement?this.parentElement.getParentWindowTop(!0):0)},Element.prototype.getParentWindowLeft=function(t=!1){return(t?this.offsetLeft:0)+(this.parentElement?this.parentElement.getWindowLeft(!0):0)},Element.prototype.getStyle=function(t){return window.getComputedStyle(this,null).getPropertyValue(t)};let B=new Date;B.setHours(0),B.setMilliseconds(0),B.setSeconds(0),B.setTime(0);let G=new class extends w{parse(t){if(!isNaN(t))return parseInt(t);let e=H(t),s=parseInt(e.token.text);if(s){B.setHours(0),B.setMilliseconds(0),B.setSeconds(0),B.setTime(0),e.next(),e.next();let t=parseInt(e.token.text)-1;e.next(),e.next();let i=parseInt(e.token.text);if(B.setFullYear(s),B.setDate(i),B.setMonth(t),e.next(),e.token){let t=parseInt(e.token.text);e.next(),e.next();let s=parseInt(e.token.text);B.setHours(t),B.setMinutes(s)}return B.valueOf()}return new Date(t).valueOf()}verify(t,e){e.valid=!0}filter(t,e){if(e.length>1)for(let s=0,i=e.length-1;s<i;s+=2){let i=e[s],n=e[s+1];if(i<=t&&t<=n)return!0}return!1}string(t){return new Date(t)+""}},j=new class extends w{parse(t){if(!isNaN(t))return parseInt(t);try{var e=parseInt(t.split(":")[0]),s=parseInt(t.split(":")[1].split(" ")[0]),i="pm"==t.split(":")[1].split(" ")[1].toLowerCase()}catch(t){e=0,s=0,i=0}return parseFloat(e+(i?12:0)+s/60)}verify(t,e){e.valid=!0}filter(t,e){return!0}string(t){return new Date(t)+""}},W=new class extends w{parse(t){return t+""}verify(t,e){e.valid=!0}filter(t,e){for(let s=0,i=e.length;s<i;s++)if(t.match(e[s]+""))return!0;return!1}},Y=new class extends w{parse(t){return parseFloat(t)}verify(t,e){e.valid=!0,NaN!=t&&void 0!=t||(e.valid=!1,e.reason="Invalid number type.")}filter(t,e){for(let s=0,i=e.length;s<i;s++)if(t==e[s])return!0;return!1}},J=new class extends w{parse(t){return!!t}verify(t,e){e.valid=!0,!t instanceof Boolean&&(e.valid=!1)}filter(t,e){return value instanceof J}},X={DATE:G,STRING:W,NUMBER:Y,BOOL:J,TIME:j};class Q extends g{constructor(t){super(),this.schema=this.constructor.schema||{},this.data={},this._temp_data_=null;let e=this.schema.__export_data__;if(e)for(let t=0,s=e.length;t<s;t++){let s=e[t],i=s.name;if("ModelContainer"==s.type){let t=this.schema[i];t[0]instanceof k?this.data[i]=new t[0].constructor:t[0].container&&t[0].schema&&(this.data[i]=new t[0].container(t[0].schema))}else"Model"==s.type&&(this.data[i]=new this.schema[i].constructor)}else for(var s in e=[],this.schema.__export_data__=e,this.schema){let t=this.schema[s];t!=e&&(t instanceof Array?t[0]instanceof k?(this.data[s]=new t[0].constructor,e.push({name:s,type:"ModelContainer",exportable:!1})):t[0].container&&t[0].schema?(this.data[s]=new t[0].container(t[0].schema),e.push({name:s,type:"ModelContainer",exportable:!1})):console.error("Schema cannot contain an array that does not contain a single object constructor of type ModelContainer or {schema:schema, container: ModelContainer}."):t instanceof Q?(this.data[s]=new t.constructor,e.push({name:s,type:"Model",exportable:!1})):e.push({name:s,type:this.schema[s].name,exportable:!0}))}t&&this.add(t)}get __export_data__(){return this.schema.__export_data__}set __export_data__(t){}destroy(){this.destructor()}destructor(){this.schema=null,this.data={},this._temp_data_=null,this.export_data=null;for(let t in this.data)"object"==typeof this.data[t]?this.data[t].destructor():this.data[t]=null;this.data=null,super.destructor()}updateViews(){var t=this.first_view;let e=this.get();for(;t;)t.update(e),t=t.next}verify(t){let e={valid:!0,reason:""};var s=this.schema[t];return s&&(s instanceof Array||s instanceof Q||s.verify(this.data[t],e)),e}getString(t){}add(t){var e=!1;for(var s in t instanceof Q&&(t=t.data),t){t[s];var i=this.schema[s];if(i)if(i instanceof Array)e=!!this.____insertDataIntoContainer____(this.data[s],t[s])||e;else if(i instanceof Q)this.data[s]||(this.data[s]=i.parse()),this.data[s].add(t[s])&&(e=!0);else{var n=this.data[s],r=i.parse(t[s]);null!==r&&r!==n&&(this.data[s]=r,e=!0)}}return e&&(this._temp_data_=null,this.updateViews(this.get())),e}get(t){var e={};if(t)for(var s in t){var i=this.schema[s];i&&(i instanceof Array?e[s]=this.____getDataFromContainer____(this.data[s],t[s]):i instanceof Q&&(e[s]=this.data[s].getData(t[s])))}else{if(!this._temp_data_){this._temp_data_={addView:t=>this.addView(t),get:t=>this.get(t),getStatus:t=>this.getDataStatus(t),verify:t=>this.verify(t),__________self:()=>this,get ____self____(){return this.__________self()}};let t=this.__export_data__;for(var n=0,r=t.length;n<r;n++){var a=t[n];a.exportable?this._temp_data_[a.name]=this.data[a.name]:this._temp_data_[a.name]=((t,e)=>({get:s=>t.____getDataFromContainer____(t.data[e],s),addView(t){this.data[e].addView(t)},get ____self____(){return t}}))(this,a.name)}}e=this._temp_data_}return e}remove(t){var e={};for(var s in t){var i=this.schema[s];i&&(i instanceof Array?e[s]=this.____removeDataFromContainer____(this.data[s],t[s]):i instanceof Q&&(e[s]=this.data[s].remove(t[s])))}return e}____insertDataIntoContainer____(t,e){return t.insert(e)}____getDataFromContainer____(t,e){return t.get(e)}____removeDataFromContainer____(t,e){return t.remove(e)}toJsonString(){let t=this.__export_data__,e="{\n";for(var s=0;s<t.length;s++){var i=t[s];i.exportable?e+=`"${i.name}":"${this.data[i.name].toString()}",\n`:e+=`"${i.name}":[${this.data[i.name].toString()}],\n`}return(e=e.slice(0,-2)+"\n")+"}"}}class K extends g{constructor(t){super(),this.data={},this._temp_data_=null}destroy(){this.destructor()}destructor(){this.data=null,super.destructor()}add(t){var e=!1;for(var s in t instanceof Q&&(t=t.data),t)this.data[s]!=t[s]&&(this.data[s]=t[s],e=!0);return e&&(this._temp_data_=null,this.updateViews(this.get())),e}get(t){var e={};if(!t){if(!this._temp_data_){this._temp_data_={addView:t=>this.addView(t),get:t=>this.get(t),getStatus:t=>this.getDataStatus(t),__________self:()=>this,get ____self____(){return this.__________self()}};for(let t in this.data)this._temp_data_[t]=this.data[t]}return this._temp_data_}for(var s in t){var i=this.schema[s];i&&(i instanceof Array?e[s]=this.____getDataFromContainer____(this.data[s],t[s]):i instanceof Q&&(e[s]=this.data[s].getData(t[s])))}return e}remove(t){return{}}toJsonString(){return this.data+""}}class Z{constructor(){this.model=null}destructor(){this.model=null}setModel(t){t instanceof Q&&(this.model=t)}set(t){this.model&&this.model.add(t)}}class tt extends Z{constructor(t,e){super(),this.url=t,this.FETCH_IN_PROGRESS=!1,this.rurl=e}destructor(){super.destructor()}get(t,e,s=!0){this.FETCH_IN_PROGRESS=!0;var i=(s?"https://":"http://")+window.location.host+this.url+(t?"?"+this.__process_url__(t):"");return(t=>fetch(i,{credentials:"same-origin",method:"GET"}).then(e=>{this.FETCH_IN_PROGRESS=!1,e.json().then(e=>{this.__process_response__(e,t)})}).catch(e=>{this.FETCH_IN_PROGRESS=!1,this.__rejected_reponse__(t),console.warn(`Unable to process response for request made to: ${this.url}. Response: ${e}. Error Received: ${e}`)}))(e)}parseJson(t){return t}__process_url__(t){var e="";for(var s in t)e+=`${s}=${t[s]}&`;return e.slice(0,-1)}__rejected_reponse__(t){t&&console.error("Unprocessed stored data in getter.")}__process_response__(t,e){if(this.rurl&&t){for(var s=this.rurl.split("<"),i=0;i<s.length&&t;i++)t=t[parseInt(s[i])?parseInt(s[i]):s[i]];console.log("json",t)}this.model?this.set(this.parseJson(t,e)):console.warn(`Unable to process response for request made to: ${this.url}. There is no model attached to this request controller!`)}}class et extends f{constructor(t){super(),this.url=t}destructor(){super.destructor()}set(t){var e="http://"+window.location.host+this.url+(t?"?"+this.__process_url__(t):"");fetch(e,{credentials:"same-origin",method:"POST"}).then(t=>{t.json().then(t=>{this.__process_response__(t)})}).catch(t=>{console.warn(`Unable to process response for request made to: ${this.url}. Response: ${t}. Error Received: ${t}`)})}parseJson(t){return t}__process_url__(t){var e="";for(var s in t)e+=`${s}=${t[s]}&`;return e.slice(0,-1)}__process_response__(t){this.model?(this.set(this.parseJson(t)),console.log(this.model)):console.warn(`Unable to process response for request made to: ${this.url}. There is no model attached to this request controller!`)}}class st{constructor(t,e){this.url=t,this.elements=[],this.finalizing_view=null,this.type="normal",this.element=e,this.element_backer=null,this.LOADED=!1}destructor(){for(var t=0;t<this.elements.length;t++)this.elements[t].destructor();this.elements=null,this.element=null}unload(t){this.LOADED=!1;for(var e=0;e<this.elements.length;e++){let s=this.elements[e];s.getTransformTo(t),s.unloadComponents()}}transitionOut(t){let e=0;for(var s=0;s<this.elements.length;s++)e=Math.max(e,this.elements[s].transitionOut(t));return e}finalize(){if(!this.LOADED){for(var t=0;t<this.elements.length;t++)this.elements[t].finalize();this.element.parentElement&&this.element.parentElement.removeChild(this.element)}}load(t,e){this.LOADED=!0;for(var s=0;s<this.elements.length;s++)this.elements[s].loadComponents(e);t.appendChild(this.element),this.element.style.opacity}transitionIn(t){"modal"==this.type&&(this.element_backer||(this.element_backer=document.createElement("div"),this.element_backer.classList.add("modal_backer"),this.element.appendChild(this.element_backer)),setTimeout(()=>{this.element.style.opacity=1},50));for(var e=0;e<this.elements.length;e++){let s=this.elements[e];s.parent=this,s.setTransformTo(t),s.transitionIn()}}getNamedElements(t){for(var e=0;e<this.elements.length;e++)this.elements[e].getNamedElements(t)}compareComponents(){}setType(t){this.type=t||"normal"}}class it extends Float64Array{constructor(t,e,s,i=0){super(4),this.r=0,this.g=0,this.b=0,this.a=1,"string"==typeof t?this.fromString(t):(this.r=t,this.g=e,this.b=s,this.a=i)}get r(){return this[0]}set r(t){this[0]=t}get g(){return this[1]}set g(t){this[1]=t}get b(){return this[2]}set b(t){this[2]=t}get a(){return this[3]}set a(t){this[3]=t}set(t){this.r=t.r,this.g=t.g,this.b=t.b,this.a=void 0!=t.a?t.a:this.a}add(t){return new it(t.r+this.r,t.g+this.g,t.b+this.b,t.a+this.a)}mult(t){return"number"==typeof t?new it(this.r*t,this.g*t,this.b*t,this.a*t):new it(this.r*t.r,this.g*t.g,this.b*t.b,this.a*t.a)}sub(t){return new it(this.r-t.r,this.g-t.g,this.b-t.b,this.a-t.a)}toString(){return`rgba(${0|this.r}, ${0|this.g}, ${0|this.b}, ${this.a})`}fromString(t){let e,s,i,n,r=H(t);switch(r.token.text){case"rgb":r.next(),e=parseInt(r.next().text),r.next(),s=parseInt(r.next().text),r.next(),i=parseInt(r.next().text),this.set({r:e,g:s,b:i});break;case"rgba":r.next(),e=parseInt(r.next().text),r.next(),s=parseInt(r.next().text),r.next(),i=parseInt(r.next().text),r.next(),n=parseFloat(r.next().text),this.set({r:e,g:s,b:i,a:n});break;case"#":r.next().text;break;default:it.colors[t]&&this.set(it.colors[t]||new it(255,255,255,1e-4))}}}it.colors={transparent:new it(255,255,255,1e-4),clear:new it(255,255,255,1e-4),red:new it(255,0,0),green:new it(0,255,0),blue:new it(0,0,255),Black:new it(0,0,0),White:new it(255,255,255),white:new it(255,255,255),Red:new it(255,0,0),Lime:new it(0,255,0),Blue:new it(0,0,255),Yellow:new it(255,255,0),Cyan:new it(0,255,255),Aqua:new it(0,255,255),Magenta:new it(255,0,255),Fuchsia:new it(255,0,255),Silver:new it(192,192,192),Gray:new it(128,128,128),Maroon:new it(128,0,0),Olive:new it(128,128,0),Green:new it(0,128,0),Purple:new it(128,0,128),Teal:new it(0,128,128),Navy:new it(0,0,128),maroon:new it(128,0,0),"dark red":new it(139,0,0),brown:new it(165,42,42),firebrick:new it(178,34,34),crimson:new it(220,20,60),red:new it(255,0,0),tomato:new it(255,99,71),coral:new it(255,127,80),"indian red":new it(205,92,92),"light coral":new it(240,128,128),"dark salmon":new it(233,150,122),salmon:new it(250,128,114),"light salmon":new it(255,160,122),"orange red":new it(255,69,0),"dark orange":new it(255,140,0),orange:new it(255,165,0),gold:new it(255,215,0),"dark golden rod":new it(184,134,11),"golden rod":new it(218,165,32),"pale golden rod":new it(238,232,170),"dark khaki":new it(189,183,107),khaki:new it(240,230,140),olive:new it(128,128,0),yellow:new it(255,255,0),"yellow green":new it(154,205,50),"dark olive green":new it(85,107,47),"olive drab":new it(107,142,35),"lawn green":new it(124,252,0),"chart reuse":new it(127,255,0),"green yellow":new it(173,255,47),"dark green":new it(0,100,0),green:new it(0,128,0),"forest green":new it(34,139,34),lime:new it(0,255,0),"lime green":new it(50,205,50),"light green":new it(144,238,144),"pale green":new it(152,251,152),"dark sea green":new it(143,188,143),"medium spring green":new it(0,250,154),"spring green":new it(0,255,127),"sea green":new it(46,139,87),"medium aqua marine":new it(102,205,170),"medium sea green":new it(60,179,113),"light sea green":new it(32,178,170),"dark slate gray":new it(47,79,79),teal:new it(0,128,128),"dark cyan":new it(0,139,139),aqua:new it(0,255,255),cyan:new it(0,255,255),"light cyan":new it(224,255,255),"dark turquoise":new it(0,206,209),turquoise:new it(64,224,208),"medium turquoise":new it(72,209,204),"pale turquoise":new it(175,238,238),"aqua marine":new it(127,255,212),"powder blue":new it(176,224,230),"cadet blue":new it(95,158,160),"steel blue":new it(70,130,180),"corn flower blue":new it(100,149,237),"deep sky blue":new it(0,191,255),"dodger blue":new it(30,144,255),"light blue":new it(173,216,230),"sky blue":new it(135,206,235),"light sky blue":new it(135,206,250),"midnight blue":new it(25,25,112),navy:new it(0,0,128),"dark blue":new it(0,0,139),"medium blue":new it(0,0,205),blue:new it(0,0,255),"royal blue":new it(65,105,225),"blue violet":new it(138,43,226),indigo:new it(75,0,130),"dark slate blue":new it(72,61,139),"slate blue":new it(106,90,205),"medium slate blue":new it(123,104,238),"medium purple":new it(147,112,219),"dark magenta":new it(139,0,139),"dark violet":new it(148,0,211),"dark orchid":new it(153,50,204),"medium orchid":new it(186,85,211),purple:new it(128,0,128),thistle:new it(216,191,216),plum:new it(221,160,221),violet:new it(238,130,238),magenta:new it(255,0,255),fuchsia:new it(255,0,255),orchid:new it(218,112,214),"medium violet red":new it(199,21,133),"pale violet red":new it(219,112,147),"deep pink":new it(255,20,147),"hot pink":new it(255,105,180),"light pink":new it(255,182,193),pink:new it(255,192,203),"antique white":new it(250,235,215),beige:new it(245,245,220),bisque:new it(255,228,196),"blanched almond":new it(255,235,205),wheat:new it(245,222,179),"corn silk":new it(255,248,220),"lemon chiffon":new it(255,250,205),"light golden rod yellow":new it(250,250,210),"light yellow":new it(255,255,224),"saddle brown":new it(139,69,19),sienna:new it(160,82,45),chocolate:new it(210,105,30),peru:new it(205,133,63),"sandy brown":new it(244,164,96),"burly wood":new it(222,184,135),tan:new it(210,180,140),"rosy brown":new it(188,143,143),moccasin:new it(255,228,181),"navajo white":new it(255,222,173),"peach puff":new it(255,218,185),"misty rose":new it(255,228,225),"lavender blush":new it(255,240,245),linen:new it(250,240,230),"old lace":new it(253,245,230),"papaya whip":new it(255,239,213),"sea shell":new it(255,245,238),"mint cream":new it(245,255,250),"slate gray":new it(112,128,144),"light slate gray":new it(119,136,153),"light steel blue":new it(176,196,222),lavender:new it(230,230,250),"floral white":new it(255,250,240),"alice blue":new it(240,248,255),"ghost white":new it(248,248,255),honeydew:new it(240,255,240),ivory:new it(255,255,240),azure:new it(240,255,255),snow:new it(255,250,250),black:new it(0,0,0),"dim gray":new it(105,105,105),"dim grey":new it(105,105,105),gray:new it(128,128,128),grey:new it(128,128,128),"dark gray":new it(169,169,169),"dark grey":new it(169,169,169),silver:new it(192,192,192),"light gray":new it(211,211,211),"light grey":new it(211,211,211),gainsboro:new it(220,220,220),"white smoke":new it(245,245,245),white:new it(255,255,255)};var nt=new V(.5,.2,0,1);requestAnimationFrame||(requestAnimationFrame=(t=>{setTimeout(t,1e3)}));class rt{constructor(t){var e=t.getBoundingClientRect();this.color=new it(window.getComputedStyle(t,null).getPropertyValue("background-color")),this.height=parseFloat(window.getComputedStyle(t,null).getPropertyValue("height")),this.width=parseFloat(window.getComputedStyle(t,null).getPropertyValue("width")),this.height=e.height,this.width=e.width,this.left=parseFloat(e.left),this.top=parseFloat(e.top),this.element=t}destructor(){this.element=null,this.color=null}start(){this.element.style.opacity=0}end(){this.element.style.opacity=1}}class at extends rt{constructor(t,e){super(t),this.from=e,this.res=t.style.top&&t.style.left,this.rt=t.style.top?t.style.top:null,this.rl=t.style.left?t.style.left:null,t.getParentWindowLeft(),t.getParentWindowTop();var s=parseFloat(window.getComputedStyle(t,null).getPropertyValue("left")),i=parseFloat(window.getComputedStyle(t,null).getPropertyValue("top")),n=this.left-this.from.left;this.left=s,this.from.left=this.left-n;var r=this.top-this.from.top;this.top=i,this.from.top=this.top-r,this.time=21,this.s=0,this.color_o=window.getComputedStyle(t,null).getPropertyValue("background-color"),this.height_o=t.style.width,this.width_o=t.style.height,this.top_o=this.top,this.left_o=this.left,this.pos=window.getComputedStyle(t,null).getPropertyValue("position")}destructor(){this.end(),this.from=null,this.s=1/0,this.element=null,super.destructor()}start(){this.element.style.opacity=1,this.element.style.top=this.from.top+"px",this.element.style.left=this.from.left+"px",this.element.style.width=this.from.width+"px",this.element.style.height=this.from.height+"px"}step(){this.s++;var t=this.s/this.time;if(t>1)return!1;var e=nt.getYatX(t);return e>1&&(e=1),this.element.style.top=Math.round((this.top-this.from.top)*e+this.from.top)+"px",this.element.style.left=Math.round((this.left-this.from.left)*e+this.from.left)+"px",this.element.style.width=(this.width-this.from.width)*e+this.from.width+"px",this.element.style.height=(this.height-this.from.height)*e+this.from.height+"px",this.element.style.backgroundColor=this.color.sub(this.from.color).mult(e).add(this.from.color)+"",t<.9999995}end(){this.element.style.backgroundColor=null,this.element.style.height=this.height_o,this.element.style.width=this.width_o,this.element.style.top=this.rt,this.element.style.left=this.rl}}class ot{constructor(t,e){this.b=e instanceof rt?e:new rt(e),this.a=new at(t,this.b),this.a.element.__TT__&&this.a.element.__TT__.destructor(),this.b.element.__TT__&&this.b.element.__TT__.destructor(),this.a.element.__TT__=this,this.b.element.__TT__=this,this.destroyed=!1,this.start()}destructor(){this.destroyed||(this.b.element&&(this.b.element.__TT__=null),this.a.element&&(this.a.element.__TT__=null),this.a.destructor(),this.destroyed=!0)}start(){this.b.start(),this.a.start()}step(){return this.a.step()}}var ht=[];function lt(t,e,s){if(!e)return((t,e)=>(s,i)=>{let n=new ot(s,t);e.push(n)})(new rt(t),ht);var i=new ot(e,t);ht.push(i),i.start()}var dt=requestAnimationFrame,ut=function(t){for(var e=0;e<ht.length;e++){var s=ht[e];s.step()||(s.destructor(),ht.splice(e,1),e--)}dt(ut)};dt(ut);class ct{constructor(){this.anim_group={},this.running_animations=[]}step(t){var e=this.running_animations.lenght;if(e>0)for(var s=0;s<e;s++){var i=this.running_animations[s];i&&!i.step(t)&&(i.destructor(),this.running_animations[s]=null)}}addBloc(t){AnimBloc}}class pt{constructor(){}set(t,e){t.style.transition="opacity 0.5s",t.style.opacity=0}set_in(t,e,s=0){return t.style.transition=`opacity ${.8*s+.5}s`,t.style.opacity=1,.8}set_out(t,e,s=0){return t.style.opacity=0,.8}finalize_out(t){t.style.opacity=0}}let mt={base:pt};class _t extends f{constructor(t=null,e=null,s={},i={}){super(),this.parent=t,this.element=e,this.children=[],this.data=i,this.named_elements=null,this.active=!1,this.export_val=null,this.DESTROYED=!1,this.transitioneer=null,i.trs&&(s.transitions&&s.transitions[i.trs]?this.transitioneer=new s.transitions[i.trs]:mt[i.trs]&&(this.transitioneer=new mt[i.trs]),this.transitioneer.set(this.element))}destructor(){if(this.DESTROYED=!0,this.LOADED){let t=this.transitionOut();for(let e=0,s=this.children.length;e<s;e++){let s=this.children[e];t=Math.max(t,s.transitionOut())}t>0&&setTimeout(()=>{this.destructor()},1e3*t+5)}else this.finalizeTransitionOut(),this.children.forEach(t=>t.destructor()),this.children.length=0,this.data=null,this.element&&this.element.parentElement&&this.element.parentElement.removeChild(this.element),this.element=null,super.destructor()}bubbleLink(t,e,s={}){if(this.parent){this.data.transition&&(s[this.data.transition]=this.element);for(var i=0,n=this.children.length;i<n;i++){let t=this.children[i];t!==e&&t.gatherTransitionElements(s)}this.parent.bubbleLink(t,this,s)}else history.pushState({},"ignored title",t),window.onpopstate()}getNamedElements(t){}gatherTransitionElements(t){this.data.transition&&!t[this.data.transition]&&(t[this.data.transition]=this.element),this.children.forEach(e=>{1==e.is&&e.gatherTransitionElements(t)})}copy(t,e){let s={};if(t||(t=this.element.cloneNode(!0)),this.children){s.element=t.children[this.element],s.children=new Array(this.children.length);for(var i=0,n=this.children.length;i<n;i++){let t=this.children[i];s.children[i]=t.copy(s.element)}}return s}handleUrlUpdate(t){}finalizeTransitionOut(){for(let t=0,e=this.children.length;t<e;t++)this.children[t].finalizeTransitionOut();this.transitioneer&&this.transitioneer.finalize_out(this.element),this.hide()}transitionIn(t=0){this.show();let e=0;this.LOADED=!0;for(let s=0,i=this.children.length;s<i;s++)e=Math.max(e,this.children[s].transitionIn(t));return this.transitioneer&&(e=Math.max(e,this.transitioneer.set_in(this.element,this.data,t))),e}transitionOut(t=0,e=!1){let s=0;this.LOADED=!1,this.transitioneer&&(s=Math.max(s,this.transitioneer.set_out(this.element,this.data,t)));for(let e=0,i=this.children.length;e<i;e++)s=Math.max(s,this.children[e].transitionOut(t));return e&&setTimeout(()=>{this.finalizeTransitionOut(),this.destructor()},1e3*s),s}updateDimensions(){for(var t=0;t<this.children.length;t++)this.children[t].updateDimensions()}__update__(t,e=!1){let s=this.update(t,e);for(let e=0,i=this.children.length;e<i;e++)this.children[e].__update__(s||t,!0)}load(t){for(var e=0;e<this.children.length;e++)this.children[e].load(t)}hide(){this.element&&(this.display=this.element.style.display,this.element.style.display="none")}show(){this.element&&"none"==this.element.style.display&&(this.element.style.display=this.display)}__updateExports__(t){this.data.export&&t[this.data.export]&&(this.export_val=t[this.data.export])}__getExports__(t){this.export_val&&(t[this.data.export]=this.export_val)}export(t={}){if(this.parent&&this.parent.export){this.__getExports__(t);for(let e=0,s=this.children.length;e<s;e++)this.children[e].__getExports__(t);this.parent.export(t)}}import(t){this.model&&this.model.add(t),this.export(t)}updateExports(t){this.data.export&&t[this.data.export]&&(this.export=t[this.data.export])}add(t){this.model?(this.model.add(t),this.export(t)):this.parent&&this.parent.add&&this.parent.add(t)}}class ft extends _t{constructor(t){super(null,t,{},{}),this.anchor=null,this.LOADED=!1,this.transitioneer=new pt,this.transitioneer.set(this.element)}getNamedElements(t){let e=this.element.children;for(var s=0;s<e.length;s++){let i=e[s];i.dataset.transition&&(t[i.dataset.transition]=i)}}}class gt extends _t{constructor(t,e){var s=document.createElement("div");s.innerHTML=`<h3> This Wick component has failed!</h3> <h4>Error Message:</h4><p>${t.stack}</p><p>Please contact the website maintainers to address the problem.</p> <p>${e.error_contact}</p>`,super(null,s,{},{}),this.transitioneer=new pt,this.transitioneer.set(this.element)}}class wt{constructor(t,e,s,i=!1,n){this.element=t,this.Constructor=e,this.children=[],this.templates=[],this.dom_index=s,this.IS_NAMED_ELEMENT=i,this.data={},this.presets=n}flesh(t){let e={},s=this.____copy____(null,null,e);return s.load(t),s.named_elements=e,s}____copy____(t,e,s){let i;if(this.element){let e=this.element.cloneNode(!0);t&&(i=this.dom_index.getElement(t)).parentElement.replaceChild(e,i),t=e,i=e}else i=this.dom_index.getElement(t);this.IS_NAMED_ELEMENT&&(s[this.data.transition]=i);let n=new this.Constructor(e,i,this.presets,this.data);if(n.data=this.data,this.children.length>0){n.children=new Array(this.children.length);for(var r=0,a=this.children.length;r<a;r++){let e=this.children[r];n.children[r]=e.____copy____(t,n,s)}}if(this.templates.length>0)for(n.templates=new Array(this.templates.length),r=0,a=this.templates.length;r<a;r++){let e=this.templates[r];n.templates[r]=e.____copy____(t,n,s)}return n}}class yt extends _t{constructor(t,e,s,i){super(t,e,s,i),this.prop=this.data.prop,this.width=0,this.height=0,this.top=0,this.left=0,this.lvl=0,this.is=1,this.data_cache=null,this.children=[],"A"==this.element.tagName&&this.processLink(this.element)}destructor(){"A"==this.element.tagName&&this.destroyLink(this.element),this.data_cache=null,super.destructor()}processLink(t,e){t.origin===location.origin&&(t.onclick||(t.onclick=((t,e,s)=>i=>{i.preventDefault(),s(t,e)&&i.preventDefault()})(t.href,t,(t,e)=>{let s=location.pathname==e.pathname,i=t.includes("#"),n="",r=H(t);for(;r.token;){if("{"==r.token.text){r.next();let e=r.token.text;r.next(),n+=this[e]||this.data_cache[e],"}"!=r.token.text&&console.warn(`incorrect value found in url ${t}`)}else n+=r.token.text;r.next()}return i&&this.export(),s||this.bubbleLink(n),!0})),t.onmouseover=(()=>{let e=t.href,s="",i=H(e);for(;i.token;){if("{"==i.token.text){i.next();let t=i.token.text;i.next(),s+=this[t]||this.data_cache[t],"}"!=i.token.text&&console.warn(`incorrect value found in url ${e}`)}else s+=i.token.text;i.next()}}))}destroyLink(t){t.onclick=null,t.onmouseover=null}update(t,e=!1){super.__updateExports__(t),t&&(this.prop?(this.element.innerHTML=t[this.prop],this[this.prop]=t[this.prop]):this.data_cache=t)}import(t){}load(t){this.children.forEach(e=>{e.load(t)}),this.data.model&&t.addView(this)}updateDimensions(){var t=this.element.getBoundingClientRect();this.width=t.width,this.height=t.height,this.top=t.top,this.left=t.left,super.updateDimensions()}}class vt extends _t{constructor(t=null,e,s,i){super(t,e,s,i),this.USE_SECURE=i.USE_HTTPS,this.named_elements={},this.template=null,this.prop=null,this.url=null,this.presets=i,this.receiver=null,this.query={},this.REQUESTING=!1,this.exports=null,this.filter_list=[],this.templates=[],this.is=0}destructor(){this.parent=null,this.receiver&&this.receiver.destructor();for(let t=0,e=this.templates.length;t<e;t++)this.templates[t].destructor();super.destructor()}load(t){if(this.data.url){let t=this.data.url.split(";");this.data.url=t[0];for(var e=1;e<t.length;e++){let s=t[e];switch(s[0]){case"p":this.url_parent_import=s.slice(1);break;case"q":this.url_query=s.slice(1);break;case"<":this.url_return=s.slice(1)}}}if(this.prop=this.data.prop,this.data.export&&(this.exports=this.data.export),this.model&&(t=this.model,this.model=null),t&&t instanceof Q&&(this.schema&&(t.constructor!=this.schema||(this.schema=null)),this.model=null),this.schema&&(t=new this.schema),t.addView(this),!this.model)throw new Error(`No Model could be found for Case constructor! Case schema "${this.data.schema}", "${this.presets.schemas[this.data.schema]}"; Case model "${this.data.model}", "${this.presets.models[this.data.model]}";`);for(this.data.url&&(this.receiver=new tt(this.data.url,this.url_return),this.receiver.setModel(t),this.____request____()),e=0;e<this.children.length;e++)this.children[e].load(this.model)}____request____(t){this.receiver.get(t,null,this.USE_SECURE).then(()=>{this.REQUESTING=!1}),this.REQUESTING=!0}export(t){this.updateSubs(this.children,t,!0),super.export(t)}updateSubs(t,e,s=!1){for(var i=0,n=t.length;i<n;i++){let n=t[i];if(n instanceof vt)n.update(e,!0);else{let t;if(s){if(n.data.import&&e[n.data.import]&&(t=n.update(e,!0))){this.updateSubs(n.children,t);continue}}else t=n.update(e,!0);this.updateSubs(n.children,t||e,s)}}}update(t,e=!1){if(this.updateDimensions(),!e){if(!t){if(!this.data_cache)return;t=this.data_cache}this.data_cache=t}if(this.updateSubs(this.children,t,e),this.templates.length>0)for(var s=0,i=this.templates.length;s<i;s++)this.templates[s].update(t,!0);this.REQUESTING=!1}handleUrlUpdate(t){let e=null;if(t&&this.data.import)if(e={},"null"==this.data.import)e=t.getClass(),console.log(e);else for(var s=this.data.import.split(";"),i=0;i<s.length;i++){let a=s[i].split(":"),o=a[0],h=a[1].split("=>");var n=h[0],r=h[1];"root"==o&&(o=null),e[r]=t.get(o,n)}if(t&&this.data.url){let e={};if(this.url_query)for(s=this.url_query.split(";"),i=0;i<s.length;i++){let a=s[i].split(":"),o=a[0],h=a[1].split("=>");n=h[0],r=h[1],"root"==o&&(o=null),e[r]=t.get(o,n)}this.____request____(e)}this.model||(this.model=new this.model_constructor,this.getter&&this.getter.setModel(this.model),this.model.addView(this)),e&&this.model.add(e)||this.update(this.model.get())}transitionIn(t=0){let e=0;for(let s=0,i=this.templates.length;s<i;s++)e=Math.max(e,this.templates[s].transitionIn(t));return e=Math.max(e,super.transitionIn(t)),this.updateDimensions(),e}transitionOut(t=0,e=!1){let s=0;for(let e=0,i=this.templates.length;e<i;e++)s=Math.max(s,this.templates[e].transitionOut(t));return Math.max(s,super.transitionOut(t,e))}finalizeTransitionOut(){for(let t=0,e=this.templates.length;t<e;t++)this.templates[t].finalizeTransitionOut();super.finalizeTransitionOut()}setActivating(){this.parent&&this.parent.setActivating()}getNamedElements(t){for(let e in this.named_elements)t[e]=this.named_elements[e]}}class xt extends vt{constructor(t,e={},s={}){super(null,t,e,s)}}class kt extends yt{constructor(t,e,s,i){super(t,e,s,i),t.filter_list.push(t=>this.filter(t)),this.element.addEventListener("input",()=>{this.parent.update()})}update(t){return!1}filter(t){return!1}}class bt extends yt{constructor(t,e,s,i){super(t,e,s,i),this.value=null}update(t){return!(!t[this.prop]||t[this.prop]==this.value||(this.value=t[this.prop],this.element.innerHTML=t[this.prop],this.parent.revise(),0))}get term(){return this.element.innerHTML}set term(t){}}class Et extends vt{constructor(t=null,e,s,i,n){if(super(t,e,s,i),this.cases=[],this.activeCases=[],this.case_constructors=[],this.filters=[],this.range=null,this.terms=[],this.prop_elements=[],n)for(var r=0,a=n.length;r<a;r++){let t=n[r];t.IS_CASE?this.case_constructors.push(t):t.Constructor==bt?this.terms.push(t.____copy____(e,this)):this.filters.push(t.____copy____(e,this))}let o=document.createElement("div");e.parentElement.replaceChild(o,e),this.element=o,this.prop=this.data.prop}filterUpdate(){let t=this.cases.slice();for(let e=this.filters.length,s=0;s<e;s++)t=this.filters[s].filter(t);for(var e=0;e<this.activeCases.length;e++)this.element.removeChild(this.activeCases[e].element);for(e=0;e<t.length;e++)this.element.appendChild(t[e].element);for(this.element.style.position=this.element.style.position,e=0;e<t.length;e++)t[e].transitionIn(e);this.activeCases=t}cull(t){if(0==t.length){for(let t=0,e=this.cases.length;t<e;t++)this.cases[t].destructor();this.cases.length=0}else{let s=new Map(t.map(t=>[t,!0]));var e=[];for(let t=0,e=this.cases.length;t<e;t++)s.has(this.cases[t].model)?s.set(this.cases[t].model,!1):(this.cases[t].destructor(),this.cases.splice(t,1),e--,t--);s.forEach((t,s,i)=>{t&&e.push(s)}),e.length>0&&this.added(e)}}load(t){}removed(t){for(let e=0;e<t.length;e++){let s=t[e];for(let t=0;t<this.cases.length;t++){let e=this.cases[t];if(e.model==s){this.cases.splice(t,1),e.dissolve();break}}}this.filterUpdate()}added(t){for(let e=0;e<t.length;e++){let s=this.case_constructors[0].flesh(t[e]);s.parent=this,this.cases.push(s)}this.filterUpdate()}revise(){this.cache&&this.update(this.cache)}getTerms(){let t=[];for(let e=0,s=this.terms.length;e<s;e++)t.push(this.terms[e].term);return 0==t.length?null:t}update(t,e=!1){let s=t[this.prop];if(e){let e=!1;for(let s=0,i=this.terms.length;s<i;s++)this.terms[s].update(t)&&(e=!0);e&&this.model&&this.cull(this.get());for(let s=0,i=this.filters.length;s<i;s++)this.filters[s].update(t)&&(e=!0);e&&this.filterUpdate()}if(!this.model&&this.prop&&s&&(s instanceof k||s.____self____)){this.cache=t;let e=s.get(this.getTerms(),!0,null);e instanceof k?(e.pin(),e.addView(this),this.cull(this.get())):e instanceof y?this.cull(e):(e=t.____self____.data[this.prop])instanceof k&&(e.addView(this),this.cull(this.get()))}}get(){if(!(this.model instanceof b)){let t=this.model.source,e=this.getTerms();if(t){this.model.destructor();let s=t.get(e,!0,null);s.pin(),s.addView(this)}return this.model.get(e,!0)}if(this.data.index){let t=this.data.index,e={};return e[t]=this.getTerms(),this.model.get(e,!0)[t]}return console.warn("No index value provided for MultiIndexedContainer!"),[]}transitionIn(t,e){let s=0;for(let i=0,n=this.templates.length;i<n;i++)s=Math.max(s,this.templates[i].transitionIn(t,e));return Math.max(s,super.transitionIn()),s}transitionOut(t=0,e=!1){for(let e=0,s=this.templates.length;e<s;e++)t=Math.max(t,this.templates[e].transitionOut());return Math.max(t,super.transitionOut(t,e)),t}}let Tt=()=>{let t=null;return{get linker(){return t},set linker(e){t||(t=e)}}};class Mt extends yt{constructor(t,e,s,i){super(t,e,s,i),this.element.display="none",this.element.addEventListener("input",()=>{var t={};t[this.prop]=this.element.value,this.add(t)})}update(t){if(t[this.prop])switch(this.val=t[this.prop],this.element.type){case"date":this.element.value=new Date(parseInt(t[this.prop])).toISOString().split("T")[0];break;case"time":this.element.value=`${("00"+(0|t[this.prop])).slice(-2)}:${("00"+t[this.prop]%1*60).slice(-2)}:00.000`;break;case"text":this.element.value=void 0!=t[this.prop]?t[this.prop]:"";break;default:switch(this.element.classList[0]){case"modulo_time":var e=t[this.prop],s=e/12>1,i=e%1*60|0,n=(0|e)%12!=0?(0|e)%12:12;this.element.value=n+":"+("0"+i).slice(-2)+(s?" PM":" AM");break;default:this.element.value=void 0!=t[this.prop]?t[this.prop]:""}}}}class At extends yt{constructor(t,e,s,i){super(t,e,s,i),this.submitted=!1,this.schema=null,e.addEventListener("submit",e=>(console.log(e.target,this,t),this.submitted||this.submit(),this.submitted=!0,e.preventDefault(),!1))}destructor(){}accepted(t){t.text().then(e=>{Tt.linker.loadPage(Tt.linker.loadNewPage(t.url,(new DOMParser).parseFromString(e,"text/html")),!1)})}rejected(t){t.text().then(e=>{Tt.linker.loadPage(Tt.linker.loadNewPage(t.url,(new DOMParser).parseFromString(e,"text/html")),!1)})}load(t){t&&(this.schema=t.schema),super.load(t)}update(t){}submit(){let t=this.element.action;var e=new FormData(this.element);if(this.schema)for(let t=0,s=this.children.length;t<s;t++){let s=this.children[t];if(s instanceof Mt){let t=s.element.name,i=s.prop,n=this.schema[i];if(n&&i){let r=n.string(s.val);e.set(t,r),console.log(i,t,r,s.val)}}}fetch(t,{method:"post",credentials:"same-origin",body:e}).then(t=>{200!=t.status?this.rejected(t):this.accepted(t)}).catch(t=>{this.rejected(t)}),console.log("Wick Form Submitted",t,e)}}let Ct=C,Lt=A,St={raw:yt,cassette:yt,form:At,input:Mt,export:class extends yt{constructor(t,e,s,i){super(t,e,s,i),"A"==e.tagName&&e.addEventListener("click",()=>{this.event()})}event(){this.parent.export()}destructor(){this.element.removeEventListener("click",this.event),super.destructor()}},iquery:class extends yt{constructor(t,e,s,i){super(t,e,s,i),this.query=this.element.dataset.query}update(t){t[this.import_prop]&&(this.element.innerHTML=void 0!=t[this.import_prop]?t[this.import_prop]:"",this.query&&this.parent.query[this.query]!=t[this.import_prop]&&(this.parent.query[this.query]=t[this.import_prop],this.parent.request()))}},edt:class extends yt{constructor(t,e,s,i){super(t,e,s,i)}update(t){let e=t[this.prop],s=new Date(e);e&&s&&(this.element.innerHTML=s)}},etime:class extends yt{constructor(t,e,s,i){super(t,e,s,i)}update(t){let e=t[this.prop],s=new Date(e);if(e&&s){let t=s.getHours()+s.getMinutes()/60;this.element.innerHTML=S(t,!0)}}},eday:class extends yt{constructor(t,e,s,i){super(t,e,s,i),this.TO_UPPERCASE="true"==this.data.uppercase,this.limit=parseInt(this.data.limit)>0?parseInt(this.data.limit):0}update(t){let e=t[this.prop],s=new Date(e);if(e&&s){let t=Ct[s.getDay()];t=this.limit>0?t.slice(0,this.limit):t,t=this.TO_UPPERCASE?t.toUpperCase():t,this.element.innerHTML=t}}},edate:class extends yt{constructor(t,e,s,i){super(t,e,s,i)}update(t){let e=t[this.prop],s=new Date(e);e&&s&&(this.element.innerHTML=s.getDate())}},eyear:class extends yt{constructor(t,e,s,i){super(t,e,s,i)}update(t){let e=t[this.prop],s=new Date(e);e&&s&&(this.element.innerHTML=s.getFullYear())}},emonth:class extends yt{constructor(t,e,s,i){super(t,e,s,i),this.TO_UPPERCASE="true"==this.data.uppercase,this.limit=parseInt(this.data.limit)>0?parseInt(this.data.limit):0}update(t){let e=t[this.prop],s=new Date(e);if(e&&s){let t=Lt[s.getMonth()].name;t=this.limit>0?t.slice(0,this.limit):t,t=this.TO_UPPERCASE?t.toUpperCase():t,this.element.innerHTML=t}}},exists:class extends yt{constructor(t,e,s,i){super(t,e,s,i),this.defualt=e.getStyle("display"),this.temp=document.createElement("span")}update(t){t&&(t[this.prop]?this.temp.parentElement&&this.temp.parentElement.replaceChild(this.element,this.temp):this.element.parentElement&&this.element.parentElement.replaceChild(this.temp,this.element))}},not_exists:class extends yt{constructor(t,e,s,i){super(t,e,s,i),this.defualt=e.getStyle("display"),this.temp=document.createElement("span")}update(t){t&&(t[this.prop]?this.element.parentElement&&this.element.parentElement.replaceChild(this.temp,this.element):this.temp.parentElement&&this.temp.parentElement.replaceChild(this.element,this.temp))}},data_edit:class extends yt{constructor(t,e,s,i){super(t,e,s,i)}load(t){this.children.forEach(e=>{e.load(t)});let e=JSON.parse(this.element.value);e&&t.add(e),this.data.model&&t.addView(this)}update(t){}event(){this.parent.export()}destructor(){this.element.removeEventListener("click",this.event),super.destructor()}},term:bt,limit:class extends kt{constructor(t,e,s,i){super(t,e,s,i),t.filter_list.push(t=>this.filter(t)),this.element.addEventListener("input",()=>{this.parent.update()})}update(t){return t[this.data.prop]?(this.offset=parseInt(t[this.data.prop])||0,!0):!!t[this.data.import]&&(this.offset=parseInt(t[this.data.import])||0,!0)}filter(t){let e=t.length,s=Math.ceil(e/parseInt(this.data.value||20)),i=this.offset*(this.data.value||20)||0;this.export_val=s,this.data.export&&this.export();let n=[];for(let r=i;r<s+i&&r<e;r++)n.push(t[r]);return n}}};function It(t,e,s){if(s)for(let i in e)t[i]=e[i],s.removeAttribute(`data-${i}`);else for(let s in e)t[s]=e[s]}class Dt{constructor(t=0,e=null){this.index=t,this.parent=e}getElement(t){return this.parent?this.parent.getElement(t).children[this.index]:t.children[this.index]}}function Ot(t,e,s){let i;return t?t.skeleton?t.skeleton:(i=function t(e,s,i,n,r){var a=s.children;let o=[];var h=i.cassettes||{};if("TEMPLATE"==s.nodeName){let r;if((a=s.content.children).length<1)return(r=n.getElementById(s.classList[0]))&&"TEMPLATE"==s.nodeName?(r=r.cloneNode(!0),s.parentElement.replaceChild(r,s),t(e,r,i,n)):[];{(r=document.importNode(s.content,!0)).attributes=s.attributes;let a=s.parentElement;if(a)return a.replaceChild(r,s),t(e,r,i,n);s=r}}for(var l=null,d=0;d<a.length;d++){let c=a[d],p={},m=!1;It(p,c.dataset),l&&(It(p,l.dataset),l=null);let _=p.class;p.transition&&(m=!0);let f=null;switch(c.tagName){case"TEMPLATE":var u;if(l=c,c.content.children.length<1){if(!(u=n.getElementById(c.classList[0]))||"TEMPLATE"!=c.nodeName){l=null;continue}u=document.importNode(u.content,!0),c.parentElement.replaceChild(u,c)}else{(u=document.importNode(c.content,!0)).attributes=c.attributes;let t=c.parentElement;t&&t.replaceChild(u,c)}d--;continue;case"CASETEMPLATE":let a=new wt(null,null,new Dt(d,r),m,i);a.data=p;let g=t(e,c,i,n);a.Constructor=(t=>(class extends Et{constructor(e,s,i,n){super(e,s,i,n,t)}}))(g),e.templates.push(a);continue;case"CASE":if(f=_&&h[_]?h[_]:vt){(p.model||p.schema)&&(f=((t,e,s)=>(class extends t{constructor(t,n,r,a){super(t,n,r,a),this.model=i.models[e],this.schema=i.schemas[s]}}))(f,p.model,p.schema));let e=new wt(c,f,new Dt(d,r),m,i);It(p,s.dataset),e.data=p,e.IS_CASE=!0,e.children=t(e,c,i,n),o.push(e);continue}break;case"INPUT":if(f=h.input||St.input){let e=new wt(null,f,new Dt(d,r),m,i);e.data=p,e.children=t(e,c,i,n,new Dt(d,r)),o.push(e)}else console.warn("Missing input Constructor in presets, unable to process form data!");break;case"FORM":let w;if(f=St.form,_&&(w=h[_])&&w.prototype instanceof At?f=w:(h.form||St.form)&&(f=h.form||St.form),f){let e=new wt(null,f,new Dt(d,r),m,i);e.data=p,o.push(e),e.children=t(e,c,i,n,new Dt(d,r));continue}console.warn("Missing form Constructor in presets, unable to process form data!");break;default:if(_&&(h[_]||St[_])&&(f=h[_]||St[_]),f){let e=new wt(null,f,new Dt(d,r),m,i);e.data=p,o.push(e),e.children=t(e,c,i,n,new Dt(d,r));continue}}o=o.concat(t(e,c,i,n,new Dt(d,r)))}return o}(null,document.importNode(t,!0),e,s)[0])?(t.skeleton=(t=>e=>t.flesh(e))(i),t.skeleton):null:null}class Pt{constructor(t){this.id=t.classList?t.classList[0]:t.id,this.components=[],this.bubbled_elements=null,this.wraps=[],this.element=t}unloadComponents(){for(var t=0;t<this.components.length;t++)this.components[t].LOADED=!1}transitionOut(){let t=0;for(var e=0;e<this.components.length;e++){let s=this.components[e];s.LOADED||(s.parent=null,t=Math.max(s.transitionOut(),t))}return t}finalize(){for(var t=0;t<this.components.length;t++){let e=this.components[t];!e.LOADED&&e.parentElement&&(e.finalizeTransitionOut(),this.wraps[t].removeChild(e.element)),e.LOADED=!1}}loadComponents(t){for(let e=0;e<this.components.length;e++){let s=this.components[e];s.parent=this,s.element.parentElement&&s.element.parentElement.removeChild(s.element),this.wraps[e].appendChild(s.element),s.handleUrlUpdate(t),this.components[e].LOADED=!0}}transitionIn(){let t=this.element.style.top;this.element.style.top=t;for(let t=0;t<this.components.length;t++)this.components[t].transitionIn()}bubbleLink(t,e,s={}){this.bubbled_elements=s,history.pushState({},"ignored title",t),window.onpopstate()}getTransformTo(t){if(t){let e={};this.getNamedElements(e);for(let s in e)t[s]=lt(e[s])}}setTransformTo(t){if(t){let e={};this.getNamedElements(e);for(let s in e){let i,n=t[s];(i=e[s])&&n&&n(i,!1)}}}getNamedElements(t){if(this.bubbled_elements){this.bubbled_elements;for(let e in this.bubbled_elements)t[e]=this.bubbled_elements[e];return}let e=this.element.children;for(var s=0;s<e.length;s++){let i=e[s];i.dataset.transition&&(t[i.dataset.transition]=i)}for(s=0;s<this.components.length;s++)this.components[s].getNamedElements(t)}setComponents(t,e,s,i,n,r){var a=Array.prototype.map.call(this.element.getElementsByTagName("component"),t=>t);if(function(t,e){let s=t.getElementsByTagName("a");for(let t=0,i=s.length;t<i;t++){let i=s[t];i.dataset.ignore_link||i.origin===location.origin&&(i.onclick||(i.onclick=((t,e,s)=>i=>{i.preventDefault(),s(t,e)&&i.preventDefault()})(i.href,i,e)))}}(this.element,(t,e)=>(history.pushState({},"ignored title",t),window.onpopstate(),!0)),a.length<1){let t=document.createElement("div");t.classList.add("comp_wrap"),t.innerHTML=this.element.innerHTML}for(var o=n.getElementsByTagName("template"),h=0;h<a.length;h++){let p=null,m=a[h];try{let a=document.createElement("div");a.classList.add("comp_wrap"),this.wraps.push(a),m.parentElement.replaceChild(a,m);var l,d=m.classList[0];if(d){if(t[d])p=t[d];else{if(l=s[d]){if(p=new l.constructor(o,i,m,n),l.model_name&&e[l.model_name]){var u=e[l.model_name];u.getter&&u.getter.get(),u.addView(p)}p.id=d,t[d]=p}else{var c=o[d];if(c)p=Ot(c,i,n)();else{let t=Ot(m,i,n);t||(t=Ot(m.children[0],i,n)),p=t?t():new ft(m)}}p?t[d]=p:(console.warn("App Component not constructed"),p=new gt)}p.handleUrlUpdate(r)}else p=new ft(m)}catch(t){console.log(t),p=new gt(t,i)}this.components.push(p)}}}let Ft={wurl:null},Nt={set:function(t,e,s){Ft.wurl&&Ft.wurl.set(t,e,s)},get:function(t,e){return Ft.wurl?Ft.wurl.set(t,e):null},goto:function(t,e){history.pushState({},"ignored title",`${t}${e?`?${p(e)}`:""}`),window.onpopstate()}};function $t(){let t=document.getElementsByTagName("modals")[0];if(!t){t=document.createElement("modals");var e=document.getElementsByTagName("app")[0];e?e.parentElement.insertBefore(t,e):document.body.appendChild(t)}return t}class qt{constructor(t){if(this.pages={},this.components={},this.component_constructors={},this.models_constructors={},this.presets=t,this.current_url=null,this.current_query,this.current_view=null,this.finalizing_pages=[],Tt.linker=this,t.static)for(let e in t.static){let s=t.static[e],i=0,n=0,r=0,a=0;(i=s.prototype.transitionIn&&s.prototype.transitionIn instanceof Function)&&(n=s.prototype.transitionOut&&s.prototype.transitionOut instanceof Function)&&(r=s.prototype.setModel&&s.prototype.setModel instanceof Function)&&(a=s.prototype.unsetModel&&s.prototype.unsetModel instanceof Function)?this.addStatic(e,s):console.warn(`Static component ${e} lacks correct component methods, \nHas transitionIn function:${i}\nHas transitionOut functon:${n}\nHas set model function:${r}\nHas unsetModel function:${a}`)}if(t.parser)for(let e in t.page_parser)t.page_parser[e];t.schemas?t.schemas.any=K:t.schemas={any:K},t.models||(t.models={}),this.modal_stack=[],window.onpopstate=(()=>{this.parseURL(document.location)})}parseURL(t){let e=t.pathname,s=this.current_url==e,i=null,n=new _(t);if(this.current_url=e,i=this.pages[e])return s?(Ft.wurl=n,i.transitionIn("modal"==i.type?$t():document.getElementsByTagName("app")[0],null,n,s)):this.loadPage(i,n,s);t&&fetch(t.href,{credentials:"same-origin",method:"GET"}).then(t=>{t.text().then(t=>{var i=(new DOMParser).parseFromString(t,"text/html");this.loadPage(this.loadNewPage(e,i,n),n,s)})}).catch(t=>{console.warn(`Unable to process response for request made to: ${this.url}. Response: ${t}. Error Received: ${t}`)})}finalizePages(){this.armed&&(this.armed,this.armed=null);for(var t=0,e=this.finalizing_pages.length;t<e;t++)this.finalizing_pages[t].finalize();this.finalizing_pages.length=0}loadPage(t,e=new _(document.location),s){Ft.wurl=e;let i=0,n=document.getElementsByTagName("app")[0],r={};if("modal"==t.type){if(s)return void t.transitionIn();let n=0;for(var a=0,o=this.modal_stack.length;a<o;a++){let e=this.modal_stack[a];if(0==n)e==t&&(n=a+1);else{let t=0;e.unload(),(t=e.transitionOut())?(i=Math.max(t,i),this.finalizing_pages.push(e)):e.finalize()}}n>0?(this.modal_stack.length=n,t.load($t(),e),t.transitionIn()):(this.modal_stack.push(t),t.load($t(),e),t.transitionIn())}else{for(a=0,o=this.modal_stack.length;a<o;a++){let t=this.modal_stack[a],e=0;t.unload(),(e=t.transitionOut())?(i=Math.max(e,i),this.finalizing_pages.push(t)):t.finalize()}if(this.modal_stack.length=0,this.current_view&&this.current_view!=t){this.current_view.unload(r),t.load(n,e);let s=this.current_view.transitionOut();window.requestAnimationFrame(()=>{t.transitionIn(r)}),i=Math.max(s,i),this.finalizing_pages.push(this.current_view)}else this.current_view||(t.load(n,e),window.requestAnimationFrame(()=>{t.transitionIn(r)}));this.current_view=t}setTimeout(()=>{this.finalizePages()},1e3*i+1)}addStatic(t,e,s){this.component_constructors[t]={constructor:e,model_name:s}}addModel(t,e){this.models_constructors[t]=e}loadNonWickPage(t){let e=document.createElement("iframe");e.src=t,e.classList.add("modal","comp_wrap");var s=new st(t,e);return s.type="modal",this.pages[t]=s,this.pages[t]}loadNewPage(t,e,s){let i=!1,n=e.getElementsByTagName("app");n.length>1&&console.warn(`Wick is designed to work with just one <app> element in a page. There are ${n.length} apps elements in ${url}. Wick will proceed with the first <app> element in the DOM. Unexpected behavior may occur.`);let r=n[0];if(!r)return console.trace("Page does not have an <app> element!"),this.loadNonWickPage(t);var a=document.createElement("apppage");a.innerHTML=r.innerHTML;var o=r.cloneNode(!0),h=document.getElementsByTagName("app")[0],l=new st(t,a);if(r){if("true"==r.dataset.modal){l.setType("modal");let t=document.createElement("modal");if(t.innerHTML=o.innerHTML,o.innerHTML="",o=t,e==document&&h){let t=document.createElement("app");document.body.replaceChild(t,h),h=t}}"true"==o.dataset.no_buffer&&(i=!0);for(var d=a.getElementsByTagName("element"),u=0;u<d.length;u++){let t,i=d[u],n=i.id;if("modal"!==l.type)t=new Pt(i);else{let e=document.createElement("div");e.innerHTML=i.innerHTML,e.classList.add("ele_wrap"),t=new Pt(i)}l.elements.push(t),this.components[n]||(this.components[n]={}),t.setComponents(this.components[n],this.models_constructors,this.component_constructors,this.presets,e,s)}document==e&&(h.innerHTML="");let n=l;return i||(this.pages[t]=n),n}}}s.d(e,"light",function(){return zt}),s.d(e,"URL",function(){return Nt}),s.d(e,"Animation",function(){return n}),s.d(e,"ArrayModelContainer",function(){return E}),s.d(e,"BTreeModelContainer",function(){return T}),s.d(e,"MultiIndexedContainer",function(){return b}),s.d(e,"Controller",function(){return Z}),s.d(e,"CustomCase",function(){return xt}),s.d(e,"Rivet",function(){return _t}),s.d(e,"CaseConstructor",function(){return Ot}),s.d(e,"Cassette",function(){return yt}),s.d(e,"Form",function(){return At}),s.d(e,"Filter",function(){return kt}),s.d(e,"Common",function(){return i}),s.d(e,"Getter",function(){return tt}),s.d(e,"Linker",function(){return qt}),s.d(e,"Model",function(){return Q}),s.d(e,"ModelContainer",function(){return k}),s.d(e,"Setter",function(){return et}),s.d(e,"View",function(){return f}),s.d(e,"SchemaType",function(){return w}),s.d(e,"schema",function(){return X});let Rt=" (  (                    )\n )\\))(   ' (          ( /(\n((_)()\\ )  )\\    (    )\\())\n_(())\\_)()((_)   )\\  ((_)\\\n\\ \\((_)/ / (_)  ((_) | |(_)\n \\ \\/\\/ /  | | / _|  | / /\n  \\_/\\_/   |_| \\__|  |_\\_\\\n",Ut=!1,Vt=!0;function zt(t){if(Vt&&console.log(t),Ut)return;Ut=!0;let e=new qt(t||{});window.addEventListener("load",()=>{e.loadPage(e.loadNewPage(document.location.pathname,document),new _(document.location),!1)}),console.log(`${Rt}Copyright 2018 Anthony C Weathersby\nhttps://gitlab.com/anthonycweathersby/wick`)}}]);