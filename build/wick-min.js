var wick=function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){"use strict";s.r(e);var i={};s.r(i),s.d(i,"Lex",function(){return X}),s.d(i,"Lexer",function(){return a}),s.d(i,"Tokenizer",function(){return c}),s.d(i,"months",function(){return P}),s.d(i,"dow",function(){return $}),s.d(i,"QBezier",function(){return V}),s.d(i,"CBezier",function(){return J}),s.d(i,"TurnQueryIntoData",function(){return p}),s.d(i,"TurnDataIntoQuery",function(){return m}),s.d(i,"GetDayStartAndEnd",function(){return N}),s.d(i,"TouchScroller",function(){return Y}),s.d(i,"float24to12ModTime",function(){return q});var n={};s.r(n),s.d(n,"AnimCore",function(){return lt}),s.d(n,"TransformTo",function(){return at}),s.d(n,"Color",function(){return tt});const r={type:"",text:""};class a{constructor(t){for(this.tk=t,this.token=t.next(),this.hold=null;this.token&&("new_line"===this.token.type||"white_space"===this.token.type||"generic"===this.token.type);)this.token=this.tk.next()}next(){if(null!==this.hold)return this.token=this.hold,this.hold=null,this.token;if(!this.token)return null;do{this.token=this.tk.next()}while(this.token&&("new_line"===this.token.type||"white_space"===this.token.type||"generic"===this.token.type));return this.token?this.token:null}assert(t){if(!this.token)return!1;var e=this.token.text==t;return e&&this.next(),e}peek(){if(this.hold)return this.hold;if(this.hold=this.tk.next(),!this.hold)return r;for(;this.hold&&("new_line"===this.hold.type||"white_space"===this.hold.type||"generic"===this.hold.type);)this.hold=this.tk.next();return this.hold?this.hold:r}}function o(t){for(var e=arguments,s=1,i=e.length;s<i;s++)if(e[s]===t)return!0;return!1}function h(t){return t>arguments[1]&&t<arguments[2]}var l=function(){var t=[{type:"number",check:(t,e)=>h(t,47,58)?o(t=e.charCodeAt(1),66,98,88,120,79,111)?2:1:46==t&&h(t=e.charCodeAt(1),47,58)?2:0,scanToEnd:t=>h(t,47,58)||46===t?-1:0,format(t){t.color="rgb(20,40,180)"}},{type:"identifier",check:t=>h(t,64,91)||h(t,96,123)?1:0,scanToEnd:t=>h(t,47,58)||h(t,64,91)||h(t,96,123)||o(t,35,36,45,95)?-1:0,format(t){}},{type:"string",check:(t,e)=>34===t?1:0,scanToEnd:t=>34===t?1:-1,format(t){}},{type:"white_space",check:t=>32===t||9===t?1:0,scanToEnd:t=>32===t||9===t?-1:0,format(t){}},{type:"new_line",check:t=>10===t?1:0,scanToEnd:t=>0,format(t){}},{type:"open_bracket",check:t=>o(t,123,40,91)?1:0,scanToEnd:t=>0,format(t){t.color="rgb(100,100,100)"}},{type:"close_bracket",check:t=>o(t,125,41,93)?1:0,scanToEnd:t=>0,format(t){t.color="rgb(100,100,100)"}},{type:"Operator",check:t=>o(t,42,43,60,61,62,92,38,37,33,94,124,58)?1:0,scanToEnd:t=>0,format(t){t.color="rgb(205,120,0)"}},{type:"Symbol",check:t=>1,scanToEnd:t=>0,format(t){t.color="red"}}];return t.clone=function(){return l()},t},d=l(),u=d.length;class c{constructor(t){this.h=null,this.line=0,this.char=0,this.offset=0,this.string=t}hold(t){this.h=t}next(){var t=0;if(this.h){var e=this.h;return this.h=null,e}if(this.string.length<1)return null;var s=this.string.charCodeAt(0);let i;for(var n=0;n<u;n++){let e=(i=d[n]).check(s,this.string);if(e>0){this.type=i.type;var r=0;for(n=e;n<this.string.length&&!((r=i.scanToEnd(this.string.charCodeAt(n)))>-1);n++)r=0;t=n+r;break}}var a=this.string.slice(0,t);this.string=this.string.slice(t),"new_line"===i.type&&(this.char=0,this.line++);var o={type:i.type,text:a,pos:this.offset,length:t,char:this.char,line:this.line};return this.offset+=t,this.char+=t,o}}function m(t){var e="";if(arguments.length>1){for(var s=0;s<arguments.length;s++)if((t=arguments[s]).component){var i=`${t.component}&`;for(var n in t)i+="component"!=n?`${n}=${t[n]}&`:"";e+=i.slice(0,-1)+"."}}else for(var n in t)e+=`${n}=${t[n]}&`;return e.slice(0,-1)}function p(t){var e={};let s=t.split(".");return s.length>0?s.forEach(t=>{var s={};t.length>1&&t.split("&").forEach((t,i)=>{if(i<1)e[t]=s;else{let s=t.split("=");e[s[0]]=s[1]}})}):t.split("&").forEach(t=>{let s=t.split("=");e[s[0]]=s[1]}),e}class _{constructor(t){this.path=t.pathname,this.host=t.hostname,this.query=function(t){let e=new Map;if(!t instanceof String)return console.warn("query argument provided is not a string!"),e;function s(t,e){let s;for(;(s=t.token)&&"&"!==s.text;){if("="!=t.peek().text)return;{let i=s.text;t.next(),t.next();let n=t.token;e.set(i,"number"==n.type?parseFloat(n.text):n.text),t.next(),t.next()}}}function i(t,e){let i;return!(!(i=t.peek())||"&"!=i.text||(i=t.token,t.next(),t.next(),e.set(i.text,new Map),s(t,e.get(i.text)),0))}return"?"==t[0]&&(t=t.slice(1)),function(t,e){for(e.set(null,new Map),"&"==t.peek().text?i(t,e):s(t,e.get(null));t.token&&"&"==t.token.text;)t.next(),i(t,e)}(new a(new c(t)),e),e}(t.search.slice(1))}setPath(t){this.path=t,this.setLocation()}setLocation(){history.replaceState({},"replaced state",`${this}`),window.onpopstate()}toString(){return`${this.path}?${function(t){let e,s="";if(e=t.get(null)){if(e.length>0)for(let[t,i]of e.entries())s+=`&${t}=${i}`;for(let[e,i]of t.entries())if(null!=e){s+=`&${e}`;for(let[t,e]of i.entries())s+=`&${t}=${e}`}return s.slice(1)}return s}(this.query)}`}getClass(t){t||(t=null);let e,s={};if(e=this.query.get(t))for(let[t,i]of e.entries())s[t]=i;return s}set(t,e,s){t||(t=null),this.query.has(t)||this.query.set(t,new Map),this.query.get(t).set(e,s),this.setLocation()}get(t,e){t||(t=null);let s=this.query.get(t);return s?s.get(e):null}}class f{constructor(){this.next=null,this.model=null}destructor(){this.model&&this.model.removeView(this)}update(t){}removed(t){}added(t){}setModel(t){}reset(){}unsetModel(){this.destructor()}}class g{constructor(){this.first_view=null}destructor(){for(var t=this.first_view;t;)t.unsetModel(),t=t.next;this.first_view=null}get(){return{}}addView(t){if(!(t instanceof f))throw new Exception("Passed in view is not an instance of wick.View!");t.model&&t.model.removeView(t);for(var e=this.first_view;e;){if(t==e)return;e=e.next}t.model=this,t.next=this.first_view,this.first_view=t,t.model=this,this._temp_data_||(this._temp_data_=this.get()),t.setModel(this),t.update(this.get())}removeView(t){if(t instanceof f&&t.model==this)for(var e=this.first_view,s=null;e;){if(t==e)return s?s.next=t.next:this.first_view=t.next,t.next=null,t.model=null,void t.reset();s=e,e=e.next}console.warn("View not a member of Model!",t)}updateViews(t){for(var e=this.first_view;e;)e.update(t),e=e.next}updateViewsRemoved(t){for(var e=this.first_view;e;)e.removed(t),e=e.next}updateViewsAdded(t){for(var e=this.first_view;e;)e.added(t),e=e.next}}class w extends Array{constructor(){super()}push(t){t instanceof Array?t.forEach(t=>{this.push(t)}):super.push(t)}setBounds(){}}let y=()=>{};class v extends g{constructor(t){super(),this.source=null,this.first_link=null,this.next=null,this.prev=null,this.pin=y,this.schema=t||this.constructor.schema||{},this.id="",this.schema.identifier&&"string"==typeof this.schema.identifier&&(this.id=this.schema.identifier)}destructor(){this.schema=null,this.identifier=null}get identifier(){return this.id}set identifier(t){}defaultReturn(t){return new w}push(t){return this.insert(t,!0)}get(t,e=!1,s){null===t&&(e=!0);let i=null;if(t?s?i=s:(i=this.defaultReturn(t)).setBounds(t):i=this.defaultReturn(t),t)if(t instanceof Array)for(var n=0;n<t.length;n++)this.get(t[n],e,i);else this.__get__(t,i,e);else this.__getAll__(i,e);return i}insert(t,e=!1){let s=this.first_view?[]:null,i=!1;if(!e&&this.source)return this.source.insert(t);if(this.__links__insert__(t),t instanceof Array){for(var n=0;n<t.length;n++)(r=t[n])instanceof this.schema.model||(r=r.____self____)||(r=new this.schema.model).add(t[n]),this.__insert__(r,s)&&(i=!0);return i}var r;return(r=t)instanceof this.schema.model||(t=r.____self____)||(r=new this.schema.model).add(t),i=this.__insert__(t,s),s&&s.length>0&&this.updateViewsAdded(s),i}remove(t,e=!1){if(!e&&this.source)return this.source.remove(t);let s=[];if(t)if(t instanceof Array){let e=null;for(let i=0;i<t.length;i++)(e=this.removeAll(t[i]))&&s.push(e)}else this.__remove__(t);else s=this.__removeAll__();return this.__links__remove__(t),s}__unlink__(t){t instanceof v&&t.source==this&&(t==this.first_link&&(this.first_link=t.next),t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next),t.source=null)}__link__(t){t instanceof v&&!t.source&&(t.source=this,t.next=this.first_link,this.first_link&&(this.first_link.prev=t),this.first_link=t,t.pin=(t=>{let e=setTimeout(()=>{t.__unlink__()},50);return()=>{clearTimeout(e),t.source||console.warn("failed to clear the destruction of container in time!")}})(t))}__links__remove__(t){let e=this.first_link;for(;e;)e.remove(t,!0),e=e.next}__links__insert__(t){let e=this.first_link;for(;e;)e.insert(t,!0),e=e.next}__insert__(t,e){return!1}__get__(t,e,s=!1){return e}__getAll__(t,e=!1){return t}cull(t){let e={},s=__getAll__([],!0),i=t=>{if(t instanceof Array)return t.forEach(t=>i(t));let s=this.getIdentifier(t);s&&(e[s]=t)};i(t);for(let t=0;t<s.lenth;t++){let e=s[t];s[this.getIdentifier(e)]||this.__remove__(e)}this.insert(t)}__removeAll__(){return[]}__remove__(t){return[]}checkIdentifier(t){return this.checkRawID(t)}checkRawID(t){return t.data&&t.schema?!!t.data[this.schema.identifier]:void 0!==t}getIdentifier(t){return t.data&&t.schema?t.data[this.schema.identifier]:t[this.schema.identifier]||t}}class x extends v{constructor(t){super({identifier:"indexed",model:t.model}),this.schema=t,this.indexes={},this.first_index=null,this.addIndex(t.index)}addIndex(t){for(let e in t){let s=t[e];s.container&&!this.indexes[e]&&(this.indexes[e]=new s.container(s.schema),this.first_index?this.indexes[e].insert(this.first_index.__getAll__()):this.first_index=this.indexes[e])}}get(t){let e;if(this.first_view,t)for(let e in t){let s={};this.indexes[e]&&(s[e]=this.indexes[e].get(t[e]))}else e=this.first_index.get();return this.updateViews(this.first_index.get()),e}remove(t){var e=[];for(let s in t)this.indexes[s]&&(e=e.concat(this.indexes[s].remove(t[s])));for(var s=0;s<this.indexes.length;s++)for(var i=0;i<e.length;i++)this.indexes[s].remove(e[i]);return e.length>0&&this.updateViewsRemoved(e),e}__insert__(t){let e=!1;for(let s in this.indexes){let i=this.indexes[s];i.insert(t)?e=!0:console.warn(`Indexed container ${s} ${i} failed to insert:`,t)}return e}__remove__(t){let e=!1;for(let s in this.indexes)this.indexes[s].remove(t)&&(e=!0);return e}}class b extends v{constructor(t){super(t),this.data=[]}destructor(){for(var t=0;t<this.data.length;t++)this.data[t].destructor();this.data=null,super.destructor()}setBounds(t){}get length(){return this.data.length}defaultReturn(t){if(this.source)return new w;let e=new b(this.schema);return this.__link__(e),e}__insert__(t,e){if(this.checkIdentifier(t)){for(var s=0,i=this.data.length;s<i;s++){var n=this.data[s];if(this.getIdentifier(n)==this.getIdentifier(t))return n.add(t),!0}if(t instanceof this.schema.model)return this.data.push(t),e&&e.push(t),!0;if(this.schema.model){var r=new this.schema.model;return r.add(t),this.data.push(r),e&&e.push(r),!0}console.error(`Model has not been created yet for dataset ${this.getIdentifier(t)}`,t)}if(this.checkRawID(t)){for(s=0,i=this.data.length;s<i;s++)if(n=this.data[s],this.getIdentifier(n)==t[this.schema.identifier])return n.add(t),!0;var a=new this.schema.model;return a.add(t),this.__insert__(a),e&&e.push(a),!0}return!1}__get__(t,e,s=!1){if(this.checkIdentifier(t))if(s)for(let s=0,i=this.data.length;s<i;s++){let i=this.data[s];this.getIdentifier(i)==this.getIdentifier(t)&&e.push(i)}else for(let s=0,i=this.data.length;s<i;s++){let i=this.data[s];this.getIdentifier(i)==this.getIdentifier(t)&&e.push(i.get())}return[]}__getAll__(t,e=!1){return e?this.data.forEach(e=>{t.push(e)}):this.data.forEach(e=>{t.push(e.get())}),t}__removeAll__(){let t=this.data.map(t=>t)||[];return this.data.length=0,t}__remove__(t){if(this.checkIdentifier(t))for(var e=0,s=this.data.length;e<s;e++){var i=this.data[e];if(this.getIdentifier(i)==this.getIdentifier(t))return this.data.splice(e,1),[i]}return[]}}class k extends v{constructor(t,e,s){super(t),this.min=e,this.max=s||e,this.left=null,this.right=null,this.id=e}getPrev(){return this.min-1}getNext(){return this.max+1}__insert__(t,e){return!!this.checkIdentifier(t)&&(e||(e=this.getIdentifier(t)),e<this.min?this.left?this.left.insert(t,e):t instanceof this.constructor?this.left=t:(this.left=new this.constructor(this.schema,this.getPrev(),null),this.left.insert(t,e)):e>this.max?this.right?this.right.insert(t,e):t instanceof this.constructor?this.right=t:(this.right=new this.constructor(this.schema,this.getNext(),null),this.right.insert(t,e)):this.__insertItem__(t,e))}__get__(t,e){if(this.checkIdentifier(t))return e||(e=this.getIdentifier(t)),e<this.min&&this.left?this.left.__get__(t,e):e>this.max&&this.right?this.right.__get__(t,e):this.__getItem__(t,e)}__getAll__(t=-1/0,e=1/0){var s=[],i=this.min>=t|0,n=this.max<=e|0,r=this.min<=e|0,a=this.max>=t|0;if(i&&this.left){var o=this.left.__getAll__(t,e);s=s.concat(o)}return r&&a&&(o=this.__getAllItems__(t,e),s=s.concat(o)),n&&this.right&&(o=this.right.__getAll__(t,e),s=s.concat(o)),s}__removeAll__(t=-1/0,e=1/0){var s=[],i=this.min>=t|0,n=this.max<=e|0,r=this.min<=e|0,a=this.max>=t|0;if(i&&this.left){var o=this.left.__removeAll__(t,e);s=s.concat(o)}return r&&a&&(o=this.__removeAllItems__(t,e),s=s.concat(o)),n&&this.right&&(o=this.right.__removeAll__(t,e),s=s.concat(o)),s}get(t){if(t instanceof Array&&"number"==typeof t[0]){for(var e=[],s=0;s<t.length;s+=2){var i=t[s],n=t[s+1];"number"==typeof i&&"number"==typeof n&&(e=e.concat(this.__getAll__(i,n)))}return e.length>0?e:[]}return super.get(t)}remove(t){if(t instanceof Array&&"number"==typeof t[0]){for(var e=[],s=0;s<t.length;s+=2){var i=t[s],n=t[s+1];"number"==typeof i&&"number"==typeof n&&(e=e.concat(this.__removeAll__(i,n)))}return e.length>0?e:[]}return super.remove(t)}__insertItem__(t,e){return!1}__removeItem__(t,e){return!1}__getItem__(t){return!1}__getAllItems__(t,e){return[]}__removeAllItems__(t,e){return[]}}class E extends k{constructor(t,e){t&&!t.identifier&&(t.identifier="date"),e=e||Date();var s=new Date(e);s.setDate(1),s.setHours(0),s.setMinutes(0),s.setSeconds(0);var i=s.valueOf();s.setMonth(s.getMonth()+1),s.setSeconds(-1),super(t,i,s.valueOf()),this.days=new M(t,this.min+.5*(this.max-this.min))}__getItem__(t){this.days.get(t)}__insertItem__(t){return this.days.insert(t)}__getAllItems__(t,e){return this.days.__getAll__(t,e)}__removeAllItems__(t,e){return this.days.__removeAll__(t,e)}getNext(){var t=new Date(this.max);return t.setMonth(t.getMonth()+1),t.valueOf()}getPrev(){var t=new Date(this.min);return t.setMonth(t.getMonth()-1),t.valueOf()}}class M extends k{constructor(t,e){var s=new Date(e||Date());s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0);var i=new Date(s);i.setDate(i.getDate()+1),i.setSeconds(-1),super(t,s.valueOf(),i.valueOf()),this.models=new b(t.unique_schema||t)}destructor(){this.models.destructor(),tis.models=null,super.destructor()}__getItem__(t,e){return this.models.get(item)}__removeItem__(t,e){return this.models.remove(item)}__getAllItems__(){return this.models.get()}__removeAllItems__(){return this.models.remove()}__insertItem__(t){return this.models.insert(t)}getNext(){var t=new Date(this.max);return t.setDate(t.getDate()+1),t.valueOf()}getPrev(){var t=new Date(this.max);return t.setDate(t.getDate()-1),t.valueOf()}}class T extends g{constructor(t){for(var e in super(),this.schema=this.constructor.schema||{},this.data={},this._temp_data_=null,this.export_data=[],this.schema){let t=this.schema[e];t instanceof Array?t[0]instanceof v?(this.data[e]=new t[0].constructor,this.export_data.push({name:e,type:"ModelContainer",exportable:!1})):t[0].container&&t[0].schema?(this.data[e]=new t[0].container(t[0].schema),this.export_data.push({name:e,type:"ModelContainer",exportable:!1})):console.error("Schema cannot contain an array that does not contain a single object constructor of type ModelContainer or {schema:schema, container: ModelContainer}."):t instanceof T?(this.data[e]=new t.constructor,this.export_data.push({name:e,type:"Model",exportable:!1})):this.export_data.push({name:e,type:this.schema[e].name,exportable:!0})}t&&this.add(t)}destroy(){this.destructor()}destructor(){this.schema=null,this.data={},this._temp_data_=null,this.export_data=null;for(let t in this.data)"object"==typeof this.data[t]?this.data[t].destructor():this.data[t]=null;this.data=null,super.destructor()}getDataStatus(t){let e={valid:!0,reason:""};var s=this.schema[t];return s&&(s instanceof Array||s instanceof T||s(this.data[t],e)),e}add(t){var e=!1;for(var s in t instanceof T&&(t=t.data),t){t[s];var i=this.schema[s];if(i)if(i instanceof Array)e=!!this.____insertDataIntoContainer____(this.data[s],t[s])||e;else if(i instanceof T)this.data[s]||(this.data[s]=new i),this.data[s].add(t[s])&&(e=!0);else{var n=this.data[s],r=i(t[s]);null!==r&&r!==n&&(this.data[s]=r,e=!0)}}return e&&(this._temp_data_=null,this.updateViews(this.get())),e}get(t){var e={};if(t)for(var s in t){var i=this.schema[s];i&&(i instanceof Array?e[s]=this.____getDataFromContainer____(this.data[s],t[s]):i instanceof T&&(e[s]=this.data[s].getData(t[s])))}else{if(!this._temp_data_){this._temp_data_={addView:t=>this.addView(t),get:t=>this.get(t),getStatus:t=>this.getDataStatus(t),__________self:()=>this,get ____self____(){return this.__________self()}};for(var n=0;n<this.export_data.length;n++){var r=this.export_data[n];r.exportable?this._temp_data_[r.name]=this.data[r.name]:this._temp_data_[r.name]=((t,e)=>({get:s=>t.____getDataFromContainer____(t.data[e],s),addView(t){this.data[e].addView(t)},get ____self____(){return t}}))(this,r.name)}}e=this._temp_data_}return e}remove(t){var e={};for(var s in t){var i=this.schema[s];i&&(i instanceof Array?e[s]=this.____removeDataFromContainer____(this.data[s],t[s]):i instanceof T&&(e[s]=this.data[s].remove(t[s])))}return e}____insertDataIntoContainer____(t,e){return t.insert(e)}____getDataFromContainer____(t,e){return t.get(e)}____removeDataFromContainer____(t,e){return t.remove(e)}toJsonString(){let t="{\n";for(var e=0;e<this.export_data.length;e++){var s=this.export_data[e];s.exportable?t+=`"${s.name}":"${this.data[s.name].toString()}",\n`:t+=`"${s.name}":[${this.data[s.name].toString()}],\n`}return(t=t.slice(0,-2)+"\n")+"}"}}class A extends g{constructor(t){super(),this.data={},this._temp_data_=null}destroy(){this.destructor()}destructor(){this.data=null,super.destructor()}add(t){var e=!1;for(var s in t instanceof T&&(t=t.data),t)this.data[s]!=t[s]&&(this.data[s]=t[s],e=!0);return e&&(this._temp_data_=null,this.updateViews(this.get())),e}get(t){var e={};if(!t){if(!this._temp_data_){this._temp_data_={addView:t=>this.addView(t),get:t=>this.get(t),getStatus:t=>this.getDataStatus(t),__________self:()=>this,get ____self____(){return this.__________self()}};for(let t in this.data)this._temp_data_[t]=this.data[t]}return this._temp_data_}for(var s in t){var i=this.schema[s];i&&(i instanceof Array?e[s]=this.____getDataFromContainer____(this.data[s],t[s]):i instanceof T&&(e[s]=this.data[s].getData(t[s])))}return e}remove(t){return{}}toJsonString(){return this.data+""}}class C{constructor(){this.model=null}destructor(){this.model=null}setModel(t){t instanceof T&&(this.model=t)}set(t){this.model&&this.model.add(t)}}class I extends C{constructor(t,e){super(),this.url=t,this.FETCH_IN_PROGRESS=!1,this.rurl=e}destructor(){super.destructor()}get(t,e,s=!0){this.FETCH_IN_PROGRESS=!0;var i=(s?"https://":"http://")+window.location.host+this.url+(t?"?"+this.__process_url__(t):"");return console.log(`fetching ${i}`),(t=>fetch(i,{credentials:"same-origin",method:"GET"}).then(e=>{this.FETCH_IN_PROGRESS=!1,e.json().then(e=>{this.__process_response__(e,t)})}).catch(e=>{this.FETCH_IN_PROGRESS=!1,this.__rejected_reponse__(t),console.warn(`Unable to process response for request made to: ${this.url}. Response: ${e}. Error Received: ${e}`)}))(e)}parseJson(t){return t}__process_url__(t){var e="";for(var s in t)e+=`${s}=${t[s]}&`;return e.slice(0,-1)}__rejected_reponse__(t){t&&console.error("Unprocessed stored data in getter.")}__process_response__(t,e){if(this.rurl&&t){for(var s=this.rurl.split("<"),i=0;i<s.length&&t;i++)t=t[parseInt(s[i])?parseInt(s[i]):s[i]];console.log("json",t)}this.model?this.set(this.parseJson(t,e)):console.warn(`Unable to process response for request made to: ${this.url}. There is no model attached to this request controller!`)}}class D extends f{constructor(t){super(),this.url=t}destructor(){super.destructor()}set(t){var e="http://"+window.location.host+this.url+(t?"?"+this.__process_url__(t):"");fetch(e,{credentials:"same-origin",method:"POST"}).then(t=>{t.json().then(t=>{this.__process_response__(t)})}).catch(t=>{console.warn(`Unable to process response for request made to: ${this.url}. Response: ${t}. Error Received: ${t}`)})}parseJson(t){return t}__process_url__(t){var e="";for(var s in t)e+=`${s}=${t[s]}&`;return e.slice(0,-1)}__process_response__(t){this.model?(this.set(this.parseJson(t)),console.log(this.model)):console.warn(`Unable to process response for request made to: ${this.url}. There is no model attached to this request controller!`)}}class S{constructor(){}set(t,e){t.style.transition="opacity 0.5s",t.style.opacity=0}set_in(t,e,s=0){return t.style.transition=`opacity ${.8*s+.5}s`,t.style.opacity=1,.8}set_out(t,e,s=0){return t.style.opacity=0,.8}finalize_out(t){t.style.opacity=0}}let L={base:S};class O extends f{constructor(t,e,s,i){super(),this.parent=t,this.element=e,this.children=[],this.data=i,this.named_elements=null,this.active=!1,this.transitioneer=null,i.trs&&(s.transitions&&s.transitions[i.trs]?this.transitioneer=new s.transitions[i.trs]:L[i.trs]&&(this.transitioneer=new L[i.trs]),this.transitioneer.set(this.element)),function(t,e,s){for(let s in e)t[s]=e[s]}(this.data,e.dataset)}destructor(){if(this.LOADED){let t=this.transitionOut();for(let e=0,s=this.children.length;e<s;e++){let s=this.children[e];t=Math.max(t,s.transitionOut())}t>0&&setTimeout(()=>{this.destructor()},1e3*t+5)}else this.finalizeTransitionOut(),this.children.forEach(t=>t.destructor()),this.children.length=0,this.data=null,this.element.parentElement&&this.element.parentElement.removeChild(this.element),this.element=null,super.destructor()}bubbleLink(t,e,s={}){if(this.parent){this.data.transition&&(s[this.data.transition]=this.element);for(var i=0,n=this.children.length;i<n;i++){let t=this.children[i];t!==e&&t.gatherTransitionElements(s)}this.parent.bubbleLink(t,this,s)}else history.pushState({},"ignored title",t),window.onpopstate()}getNamedElements(t){}gatherTransitionElements(t){this.data.transition&&!t[this.data.transition]&&(t[this.data.transition]=this.element),this.children.forEach(e=>{1==e.is&&e.gatherTransitionElements(t)})}copy(t,e){let s={};if(t||(t=this.element.cloneNode(!0)),this.children){s.element=t.children[this.element],s.children=new Array(this.children.length);for(var i=0,n=this.children.length;i<n;i++){let t=this.children[i];s.children[i]=t.copy(s.element)}}return s}handleUrlUpdate(t){}finalizeTransitionOut(){for(let t=0,e=this.children.length;t<e;t++)this.children[t].finalizeTransitionOut();this.transitioneer&&this.transitioneer.finalize_out(this.element),this.hide()}transitionIn(t=0){this.show();let e=0;this.LOADED=!0;for(let s=0,i=this.children.length;s<i;s++)e=Math.max(e,this.children[s].transitionIn(t));return this.transitioneer&&(e=Math.max(e,this.transitioneer.set_in(this.element,this.data,t))),e}transitionOut(t=0){let e=0;this.LOADED=!1,this.transitioneer&&(e=Math.max(e,this.transitioneer.set_out(this.element,this.data,t)));for(let s=0,i=this.children.length;s<i;s++)e=Math.max(e,this.children[s].transitionOut(t));return e}updateDimensions(){for(var t=0;t<this.children.length;t++)this.children[t].updateDimensions()}load(){}hide(){this.display=this.element.style.display,this.element.style.display="none"}show(){"none"==this.element.style.display&&(this.element.style.display=this.display)}export(t={}){this.exports&&this.model&&(t[this.exports]=this.model.get()[this.exports]),this.parent&&this.parent.import(t)}import(t){this.model&&this.model.add(t),this.export(t)}}const P=[{name:"January",days:31,day_offset:0,day_offse_leapt:0},{name:"February",days:28,day_offset:31,day_offset_leap:31},{name:"March",days:31,day_offset:59,day_offset_leap:60},{name:"April",days:30,day_offset:90,day_offset_leap:91},{name:"May",days:31,day_offset:120,day_offset_leap:121},{name:"June",days:30,day_offset:151,day_offset_leap:152},{name:"July",days:31,day_offset:181,day_offset_leap:182},{name:"August",days:31,day_offset:212,day_offset_leap:213},{name:"September",days:30,day_offset:243,day_offset_leap:244},{name:"October",days:31,day_offset:273,day_offset_leap:274},{name:"November",days:30,day_offset:304,day_offset_leap:305},{name:"December",days:31,day_offset:33,day_offse_leapt:335}];var $=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function N(t){var e={start:0,end:0};if(t instanceof Date||"number"==typeof t){var s=new Date(t);s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0),e.start=s.valueOf(),s.setDate(s.getDate()+1),s.setSeconds(-1),e.end=s.valueOf()}return e}function q(t,e){var s=t>=12&&t<24;return((0|t)%12!=0?(0|t)%12:12)+":"+("0"+(t%1*60|0)).slice(-2)+(s?e?"PM":"pm":e?"AM":"am")}class F extends Float64Array{constructor(t,e){if(super(2),"number"==typeof t)return this[0]=t,void(this[1]=e);t instanceof Array&&(this[0]=t[0],this[1]=t[1])}draw(t,e=1){t.beginPath(),t.moveTo(this.x*e,this.y*e),t.arc(this.x*e,this.y*e,.01*e,0,2*Math.PI),t.stroke()}get x(){return this[0]}set x(t){"number"==typeof t&&(this[0]=t)}get y(){return this[1]}set y(t){"number"==typeof t&&(this[1]=t)}}function R(t,e,s,i){var n=1-t;return n*n*e+2*n*t*s+t*t*i}function U(t,e,s){var i={a:1/0,b:1/0},n=t-2*e+s,r=2*(e-t),a=t;return 0==r||(Math.abs(n)<5e-11?i.a=-a/r:(i.a=(-r-Math.sqrt(r*r-4*n*a))/(2*n),i.b=(-r+Math.sqrt(r*r-4*n*a))/(2*n))),i}class V{constructor(t,e,s,i,n,r){return this.x1=0,this.x2=0,this.x3=0,this.y1=0,this.y2=0,this.y3=0,"number"==typeof t?(this.x1=t,this.x2=s,this.x3=n,this.y1=e,this.y2=i,void(this.y3=r)):t instanceof V?(this.x1=t.x1,this.x2=t.x2,this.x3=t.x3,this.y1=t.y1,this.y2=t.y2,void(this.y3=t.y3)):t instanceof Array?(this.x1=t[0],this.y1=t[1],this.x2=t[2],this.y2=t[3],this.x3=t[4],void(this.y3=t[5])):void 0}reverse(){return new V(this.x3,this.y3,this.x2,this.y2,this.x1,this.y1)}point(t){return new F(R(t,this.x1,this.x2,this.x3),R(t,this.y1,this.y2,this.y3))}tangent(t){var e={x:0,y:0},s=this.x2-this.x1,i=this.y2-this.y1,n=this.x3-this.x2,r=this.y3-this.y2;return e.x=(1-t)*s+t*n,e.y=(1-t)*i+t*r,e}toArray(){return[this.x1,this.y1,this.x2,this.y2,this.x3,this.y3]}split(t){return function(t,e){var s=[],i=[];return function t(e,n){if(2==e.length)s.push(e[0],e[1]),i.push(e[0],e[1]);else{for(var r=[],a=0;a<e.length-2;a+=2)0==a&&s.push(e[a],e[a+1]),a==e.length-4&&i.push(e[a+2],e[a+3]),r.push((1-n)*e[a]+n*e[a+2]),r.push((1-n)*e[a+1]+n*e[a+3]);t(r,n)}}(t,e),{x:new V(i),y:new V(s)}}(this.toArray(),t)}rootsX(){return this.roots(this.x1,this.x2,this.x3)}roots(t,e,s){this.toArray();var i=t-2*e+s,n=2*(e-t),r=t,a=2*r;console.log(i," c");var o=Math.sqrt(n*n-4*r*i);return console.log(o,n,a,s),[(-n+o)/a,(-n-o)/a]}rootsa(){var t=this.toArray(),e=t[1],s=t[3],i=t[5],n=t[0],r=t[2],a=2*(s-e),o=2*(r-n);return[-a/(2*(i-s)-a),-o/(-o+2*(t[4]-r))]}boundingBox(){var t=curve[0],e=curve[1],s=curve[2],i=curve[3],n=curve[4],r=curve[5],a=getRootsClamped(curve);return{min:{x:Math.min(t,s,n,a.y[0]||1/0,a.x[0]||1/0),y:Math.min(e,i,r,a.y[1]||1/0,a.x[1]||1/0)},max:{x:Math.max(t,s,n,a.y[0]||-1/0,a.x[0]||-1/0),y:Math.max(e,i,r,a.y[1]||-1/0,a.x[1]||-1/0)}}}rotate(t,e){t=t/180*Math.PI;for(var s=this.toArray(),i=0;i<6;i+=2){var n=curve[i]-e.x,r=curve[i+1]-e.y;s[i]=n*Math.cos(t)-r*Math.sin(t)+e.x,s[i+1]=n*Math.sin(t)+r*Math.cos(t)+e.y}return new V(s)}intersects(){return{x:U(this.x1,this.x2,this.x3),y:U(this.y1,this.y2,this.y3)}}add(t,e){if("number"==typeof t)return new V(this.x1+t,this.y1+e,this.x2+t,this.y2+e,this.x3+t,this.y3+e)}}const H=Math.sqrt,z=Math.cos,B=Math.acos,j=Math.PI;function G(t){return t<0?-Math.pow(-t,1/3):Math.pow(t,1/3)}function W(t,e,s,i,n){var r=1-t,a=r*r,o=t*t;return r*a*e+3*a*t*s+3*o*r*i+o*t*n}Math.sin;class J extends Float64Array{constructor(t,e,s,i,n,r,a,o){return super(8),4==arguments.length?(this[0]=0,this[1]=0,this[2]=t,this[3]=e,this[4]=s,this[5]=i,this[6]=1,void(this[7]=1)):"number"==typeof t?(this[0]=t,this[1]=e,this[2]=s,this[3]=i,this[4]=n,this[5]=r,this[6]=a,void(this[7]=o)):t instanceof Array?(this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],void(this[7]=t[4])):void 0}get x1(){return this[0]}set x1(t){this[0]=t}get x2(){return this[2]}set x2(t){this[2]=t}get x3(){return this[4]}set x3(t){this[4]=t}get x4(){return this[6]}set x4(t){this[6]=t}get y1(){return this[1]}set y1(t){this[1]=t}get y2(){return this[3]}set y2(t){this[3]=t}get y3(){return this[5]}set y3(t){this[5]=t}get y4(){return this[7]}set y4(t){this[7]=t}add(t,e=0){return new CCurve(this[0]+t,this[1]+e,this[2]+t,this[3]+e,this[4]+t,this[5]+e,this[6]+t,this[7]+e)}valY(t){return W(t,this[1],this[3],this[5],this[7])}valX(t){return W(t,this[0],this[2],this[4],this[6])}point(t){return new F(W(t,this[0],this[2],this[4],this[6]),W(t,this[1],this[3],this[5],this[7]))}roots(t,e,s,i){var n,r,a,o=3*e-t-3*s+i,h=(3*t-6*e+3*s)/o,l=(-3*t+3*e)/o,d=(3*l-h*h)/3,u=(2*h*h*h-9*h*l+t/o*27)/27,c=u/2,m=c*c+(s=d/3)*s*s;if(m<0){var p=-d/3,_=H(p*p*p),f=-u/(2*_),g=B(f<-1?-1:f>1?1:f),w=2*G(_);return r=w*z(g/3)-h/3,a=w*z((g+2*j)/3)-h/3,[w*z((g+4*j)/3)-h/3,r,a]}if(0===m)return[a=-(n=c<0?G(-c):-G(c))-h/3,r=2*n-h/3];var y=H(m);return[r=(n=G(y-c))-G(y+c)-h/3]}rootsY(){return this.roots(this[1],this[3],this[5],this[7])}rootsX(){return this.roots(this[0],this[2],this[4],this[6])}getYatX(t){var e,s=this[0]-t,i=this[2]-t,n=3*i,r=3*s,a=3*(this[4]-t),o=1/(-s+n-a+(this[6]-t)),h=(r-6*i+a)*o,l=(-r+n)*o,d=1/3*(3*l-h*h),u=d*(1/3),c=1/27*(2*h*h*h-9*h*l+s*o*27),m=.5*c,p=m*m+u*u*u;if(p<0){var _=-d/3,f=H(_*_*_),g=-c/(2*f),w=B(g<-1?-1:g>1?1:g);e=2*G(f)*z((w+4*j)/3)-h/3}else if(0===p)e=-(m<0?G(-m):-G(m))-h*(1/3);else{var y=H(p);e=G(y-m)-G(y+m)-h*(1/3)}return W(e,this[1],this[3],this[5],this[7])}draw(t,e=1){t.beginPath(),t.moveTo(this[0]*e,this[1]*e),t.bezierCurveTo(this[2]*e,this[3]*e,this[4]*e,this[5]*e,this[6]*e,this[7]*e),t.stroke()}}class Y{constructor(t,e=.02,s=0){this.origin_x=0,this.origin_y=0,this.velocity_x=0,this.velocity_y=0,this.GO=!0,this.drag=e>0?e:.02,this.element=t,!s instanceof Number&&(s=0);let i=0,n=(t,e,s,i=1)=>{let r=this.drag;t-=t*r*s*i,e-=e*r*s*i;let a=Math.max(Math.abs(e),Math.abs(e)),o=!(s>0&&a>.1&&this.GO);o||requestAnimationFrame(()=>{n(t,e,1)}),o=o&&0!=s;for(var h=0,l=this.listeners.length;h<l;h++)this.listeners[h]({dx:t,dy:e,end:o})&&(this.GO=!1)};this.event_b=(t=>{i=performance.now();var e=t.touches[s];this.velocity_x=this.origin_x-e.clientX,this.velocity_y=this.origin_y-e.clientY,this.origin_x=e.clientX,this.origin_y=e.clientY,n(this.velocity_x,this.velocity_y,0,0)}),this.event_c=(t=>{let e=performance.now()-i,s=Math.min(e/8.6666666,1/this.drag);this.GO=!0,n(this.velocity_x,this.velocity_y,s),this.velocity_x=0,this.velocity_y=0,window.removeEventListener("touchmove",this.event_b),window.removeEventListener("touchend",this.event_c)}),this.event_a=(t=>{if(!this.GO)return t.preventDefualt(),t.stopPropagation(),!1;i=performance.now(),this.GO=!1;var e=t.touches[s];e&&(this.origin_y=e.clientY,this.origin_x=e.clientX,window.addEventListener("touchmove",this.event_b),window.addEventListener("touchend",this.event_c))}),this.element.addEventListener("touchstart",this.event_a),this.listeners=[]}destructor(){this.listeners=null,this.element.removeEventListener("touchstart",this.event_a)}addEventListener(t){if(t instanceof Function){for(var e=0;e<this.listeners.length;e++)if(this.listeners[e]==t)return;this.listeners.push(t)}}removeEventListener(t){for(var e=0;e<this.listeners.length;e++)if(this.listeners[e]==t)return void this.listeners.splice(e,1)}}function X(t){return"string"!=typeof t?(console.warn("Cannot create a lexer on a non-string object!"),null):new a(new c(t))}Element.prototype.getWindowTop=function(){return this.offsetTop+(this.parentElement?this.parentElement.getWindowTop():0)},Element.prototype.getWindowLeft=function(){return this.offsetLeft+(this.parentElement?this.parentElement.getWindowLeft():0)},Element.prototype.getParentWindowTop=function(t=!1){return(t?this.offsetTop:0)+(this.parentElement?this.parentElement.getParentWindowTop(!0):0)},Element.prototype.getParentWindowLeft=function(t=!1){return(t?this.offsetLeft:0)+(this.parentElement?this.parentElement.getWindowLeft(!0):0)},Element.prototype.getStyle=function(t){return window.getComputedStyle(this,null).getPropertyValue(t)};class Q extends O{constructor(t){super(null,t,{},{}),this.anchor=null,this.LOADED=!1,this.transitioneer=new S,this.transitioneer.set(this.element)}getNamedElements(t){let e=this.element.children;for(var s=0;s<e.length;s++){let i=e[s];i.dataset.transition&&(t[i.dataset.transition]=i)}}}class K extends O{constructor(t,e){var s=document.createElement("div");s.innerHTML=`<h3> This Wick component has failed!</h3> <h4>Error Message:</h4><p>${t.stack}</p><p>Please contact the website maintainers to address the problem.</p> <p>${e.error_contact}</p>`,super(null,s,{},{}),this.transitioneer=new S,this.transitioneer.set(this.element)}}class Z{constructor(t,e){this.url=t,this.elements=[],this.finalizing_view=null,this.type="normal",this.element=e,this.element_backer=null,this.LOADED=!1}destructor(){for(var t=0;t<this.elements.length;t++)this.elements[t].destructor();this.elements=null,this.element=null}unload(t){this.LOADED=!1;for(var e=0;e<this.elements.length;e++){let s=this.elements[e];s.getTransformTo(t),s.unloadComponents()}}transitionOut(t){let e=0;for(var s=0;s<this.elements.length;s++)e=Math.max(e,this.elements[s].transitionOut(t));return e}finalize(){if(!this.LOADED){for(var t=0;t<this.elements.length;t++)this.elements[t].finalize();this.element.parentElement&&this.element.parentElement.removeChild(this.element)}}load(t,e){this.LOADED=!0;for(var s=0;s<this.elements.length;s++)this.elements[s].loadComponents(e);t.appendChild(this.element),this.element.style.opacity}transitionIn(t){"modal"==this.type&&(this.element_backer||(this.element_backer=document.createElement("div"),this.element_backer.classList.add("modal_backer"),this.element.appendChild(this.element_backer)),setTimeout(()=>{this.element.style.opacity=1},50));for(var e=0;e<this.elements.length;e++){let s=this.elements[e];s.parent=this,s.setTransformTo(t),s.transitionIn()}}getNamedElements(t){for(var e=0;e<this.elements.length;e++)this.elements[e].getNamedElements(t)}compareComponents(){}setType(t){this.type=t||"normal"}}class tt extends Float64Array{constructor(t,e,s,i=0){super(4),this.r=0,this.g=0,this.b=0,this.a=1,"string"==typeof t?this.fromString(t):(this.r=t,this.g=e,this.b=s,this.a=i)}get r(){return this[0]}set r(t){this[0]=t}get g(){return this[1]}set g(t){this[1]=t}get b(){return this[2]}set b(t){this[2]=t}get a(){return this[3]}set a(t){this[3]=t}set(t){this.r=t.r,this.g=t.g,this.b=t.b,this.a=void 0!=t.a?t.a:this.a}add(t){return new tt(t.r+this.r,t.g+this.g,t.b+this.b,t.a+this.a)}mult(t){return"number"==typeof t?new tt(this.r*t,this.g*t,this.b*t,this.a*t):new tt(this.r*t.r,this.g*t.g,this.b*t.b,this.a*t.a)}sub(t){return new tt(this.r-t.r,this.g-t.g,this.b-t.b,this.a-t.a)}toString(){return`rgba(${0|this.r}, ${0|this.g}, ${0|this.b}, ${this.a})`}fromString(t){let e,s,i,n,r=X(t);switch(r.token.text){case"rgb":r.next(),e=parseInt(r.next().text),r.next(),s=parseInt(r.next().text),r.next(),i=parseInt(r.next().text),this.set({r:e,g:s,b:i});break;case"rgba":r.next(),e=parseInt(r.next().text),r.next(),s=parseInt(r.next().text),r.next(),i=parseInt(r.next().text),r.next(),n=parseFloat(r.next().text),this.set({r:e,g:s,b:i,a:n});break;case"#":r.next().text;break;default:tt.colors[t]&&this.set(tt.colors[t]||new tt(255,255,255,1e-4))}}}tt.colors={transparent:new tt(255,255,255,1e-4),clear:new tt(255,255,255,1e-4),red:new tt(255,0,0),green:new tt(0,255,0),blue:new tt(0,0,255),Black:new tt(0,0,0),White:new tt(255,255,255),white:new tt(255,255,255),Red:new tt(255,0,0),Lime:new tt(0,255,0),Blue:new tt(0,0,255),Yellow:new tt(255,255,0),Cyan:new tt(0,255,255),Aqua:new tt(0,255,255),Magenta:new tt(255,0,255),Fuchsia:new tt(255,0,255),Silver:new tt(192,192,192),Gray:new tt(128,128,128),Maroon:new tt(128,0,0),Olive:new tt(128,128,0),Green:new tt(0,128,0),Purple:new tt(128,0,128),Teal:new tt(0,128,128),Navy:new tt(0,0,128),maroon:new tt(128,0,0),"dark red":new tt(139,0,0),brown:new tt(165,42,42),firebrick:new tt(178,34,34),crimson:new tt(220,20,60),red:new tt(255,0,0),tomato:new tt(255,99,71),coral:new tt(255,127,80),"indian red":new tt(205,92,92),"light coral":new tt(240,128,128),"dark salmon":new tt(233,150,122),salmon:new tt(250,128,114),"light salmon":new tt(255,160,122),"orange red":new tt(255,69,0),"dark orange":new tt(255,140,0),orange:new tt(255,165,0),gold:new tt(255,215,0),"dark golden rod":new tt(184,134,11),"golden rod":new tt(218,165,32),"pale golden rod":new tt(238,232,170),"dark khaki":new tt(189,183,107),khaki:new tt(240,230,140),olive:new tt(128,128,0),yellow:new tt(255,255,0),"yellow green":new tt(154,205,50),"dark olive green":new tt(85,107,47),"olive drab":new tt(107,142,35),"lawn green":new tt(124,252,0),"chart reuse":new tt(127,255,0),"green yellow":new tt(173,255,47),"dark green":new tt(0,100,0),green:new tt(0,128,0),"forest green":new tt(34,139,34),lime:new tt(0,255,0),"lime green":new tt(50,205,50),"light green":new tt(144,238,144),"pale green":new tt(152,251,152),"dark sea green":new tt(143,188,143),"medium spring green":new tt(0,250,154),"spring green":new tt(0,255,127),"sea green":new tt(46,139,87),"medium aqua marine":new tt(102,205,170),"medium sea green":new tt(60,179,113),"light sea green":new tt(32,178,170),"dark slate gray":new tt(47,79,79),teal:new tt(0,128,128),"dark cyan":new tt(0,139,139),aqua:new tt(0,255,255),cyan:new tt(0,255,255),"light cyan":new tt(224,255,255),"dark turquoise":new tt(0,206,209),turquoise:new tt(64,224,208),"medium turquoise":new tt(72,209,204),"pale turquoise":new tt(175,238,238),"aqua marine":new tt(127,255,212),"powder blue":new tt(176,224,230),"cadet blue":new tt(95,158,160),"steel blue":new tt(70,130,180),"corn flower blue":new tt(100,149,237),"deep sky blue":new tt(0,191,255),"dodger blue":new tt(30,144,255),"light blue":new tt(173,216,230),"sky blue":new tt(135,206,235),"light sky blue":new tt(135,206,250),"midnight blue":new tt(25,25,112),navy:new tt(0,0,128),"dark blue":new tt(0,0,139),"medium blue":new tt(0,0,205),blue:new tt(0,0,255),"royal blue":new tt(65,105,225),"blue violet":new tt(138,43,226),indigo:new tt(75,0,130),"dark slate blue":new tt(72,61,139),"slate blue":new tt(106,90,205),"medium slate blue":new tt(123,104,238),"medium purple":new tt(147,112,219),"dark magenta":new tt(139,0,139),"dark violet":new tt(148,0,211),"dark orchid":new tt(153,50,204),"medium orchid":new tt(186,85,211),purple:new tt(128,0,128),thistle:new tt(216,191,216),plum:new tt(221,160,221),violet:new tt(238,130,238),magenta:new tt(255,0,255),fuchsia:new tt(255,0,255),orchid:new tt(218,112,214),"medium violet red":new tt(199,21,133),"pale violet red":new tt(219,112,147),"deep pink":new tt(255,20,147),"hot pink":new tt(255,105,180),"light pink":new tt(255,182,193),pink:new tt(255,192,203),"antique white":new tt(250,235,215),beige:new tt(245,245,220),bisque:new tt(255,228,196),"blanched almond":new tt(255,235,205),wheat:new tt(245,222,179),"corn silk":new tt(255,248,220),"lemon chiffon":new tt(255,250,205),"light golden rod yellow":new tt(250,250,210),"light yellow":new tt(255,255,224),"saddle brown":new tt(139,69,19),sienna:new tt(160,82,45),chocolate:new tt(210,105,30),peru:new tt(205,133,63),"sandy brown":new tt(244,164,96),"burly wood":new tt(222,184,135),tan:new tt(210,180,140),"rosy brown":new tt(188,143,143),moccasin:new tt(255,228,181),"navajo white":new tt(255,222,173),"peach puff":new tt(255,218,185),"misty rose":new tt(255,228,225),"lavender blush":new tt(255,240,245),linen:new tt(250,240,230),"old lace":new tt(253,245,230),"papaya whip":new tt(255,239,213),"sea shell":new tt(255,245,238),"mint cream":new tt(245,255,250),"slate gray":new tt(112,128,144),"light slate gray":new tt(119,136,153),"light steel blue":new tt(176,196,222),lavender:new tt(230,230,250),"floral white":new tt(255,250,240),"alice blue":new tt(240,248,255),"ghost white":new tt(248,248,255),honeydew:new tt(240,255,240),ivory:new tt(255,255,240),azure:new tt(240,255,255),snow:new tt(255,250,250),black:new tt(0,0,0),"dim gray":new tt(105,105,105),"dim grey":new tt(105,105,105),gray:new tt(128,128,128),grey:new tt(128,128,128),"dark gray":new tt(169,169,169),"dark grey":new tt(169,169,169),silver:new tt(192,192,192),"light gray":new tt(211,211,211),"light grey":new tt(211,211,211),gainsboro:new tt(220,220,220),"white smoke":new tt(245,245,245),white:new tt(255,255,255)};var et=new J(.5,.2,0,1);requestAnimationFrame||(requestAnimationFrame=(t=>{setTimeout(t,1e3)}));class st{constructor(t){var e=t.getBoundingClientRect();this.color=new tt(window.getComputedStyle(t,null).getPropertyValue("background-color")),this.height=parseFloat(window.getComputedStyle(t,null).getPropertyValue("height")),this.width=parseFloat(window.getComputedStyle(t,null).getPropertyValue("width")),this.height=e.height,this.width=e.width,this.left=parseFloat(e.left),this.top=parseFloat(e.top),this.element=t}destructor(){this.element=null,this.color=null}start(){this.element.style.opacity=0}end(){this.element.style.opacity=1}}class it extends st{constructor(t,e){super(t),this.from=e,this.res=t.style.top&&t.style.left,this.rt=t.style.top?t.style.top:null,this.rl=t.style.left?t.style.left:null,t.getParentWindowLeft(),t.getParentWindowTop();var s=parseFloat(window.getComputedStyle(t,null).getPropertyValue("left")),i=parseFloat(window.getComputedStyle(t,null).getPropertyValue("top")),n=this.left-this.from.left;this.left=s,this.from.left=this.left-n;var r=this.top-this.from.top;this.top=i,this.from.top=this.top-r,this.time=21,this.s=0,this.color_o=window.getComputedStyle(t,null).getPropertyValue("background-color"),this.height_o=t.style.width,this.width_o=t.style.height,this.top_o=this.top,this.left_o=this.left,this.pos=window.getComputedStyle(t,null).getPropertyValue("position")}destructor(){this.end(),this.from=null,this.s=1/0,this.element=null,super.destructor()}start(){this.element.style.opacity=1,this.element.style.top=this.from.top+"px",this.element.style.left=this.from.left+"px",this.element.style.width=this.from.width+"px",this.element.style.height=this.from.height+"px"}step(){this.s++;var t=this.s/this.time;if(t>1)return!1;var e=et.getYatX(t);return e>1&&(e=1),this.element.style.top=Math.round((this.top-this.from.top)*e+this.from.top)+"px",this.element.style.left=Math.round((this.left-this.from.left)*e+this.from.left)+"px",this.element.style.width=(this.width-this.from.width)*e+this.from.width+"px",this.element.style.height=(this.height-this.from.height)*e+this.from.height+"px",this.element.style.backgroundColor=this.color.sub(this.from.color).mult(e).add(this.from.color)+"",t<.9999995}end(){this.element.style.backgroundColor=null,this.element.style.height=this.height_o,this.element.style.width=this.width_o,this.element.style.top=this.rt,this.element.style.left=this.rl}}class nt{constructor(t,e){this.b=e instanceof st?e:new st(e),this.a=new it(t,this.b),this.a.element.__TT__&&this.a.element.__TT__.destructor(),this.b.element.__TT__&&this.b.element.__TT__.destructor(),this.a.element.__TT__=this,this.b.element.__TT__=this,this.destroyed=!1,this.start()}destructor(){this.destroyed||(this.b.element&&(this.b.element.__TT__=null),this.a.element&&(this.a.element.__TT__=null),this.a.destructor(),this.destroyed=!0)}start(){this.b.start(),this.a.start()}step(){return this.a.step()}}var rt=[];function at(t,e,s){if(!e)return((t,e)=>(s,i)=>{let n=new nt(s,t);e.push(n)})(new st(t),rt);var i=new nt(e,t);rt.push(i),i.start()}var ot=requestAnimationFrame,ht=function(t){for(var e=0;e<rt.length;e++){var s=rt[e];s.step()||(s.destructor(),rt.splice(e,1),e--)}ot(ht)};ot(ht);class lt{constructor(){this.anim_group={},this.running_animations=[]}step(t){var e=this.running_animations.lenght;if(e>0)for(var s=0;s<e;s++){var i=this.running_animations[s];i&&!i.step(t)&&(i.destructor(),this.running_animations[s]=null)}}addBloc(t){AnimBloc}}class dt{constructor(t,e,s,i=!1,n){this.element=t,this.Constructor=e,this.children=[],this.templates=[],this.DOM_index=s,this.IS_NAMED_ELEMENT=i,this.data={},this.presets=n}flesh(t){let e={},s=this.____copy____(null,null,e);return s.load(t),s.named_elements=e,s}____copy____(t,e,s){if(this.element){let e=this.element.cloneNode(!0);t&&(t=t.children[this.DOM_index]).parentElement.replaceChild(e,t),t=e}else t=t.children[this.DOM_index];this.IS_NAMED_ELEMENT&&(s[this.data.transition]=t);let i=new this.Constructor(e,t,this.presets,this.data);if(i.data=this.data,this.children.length>0){i.children=new Array(this.children.length);for(var n=0,r=this.children.length;n<r;n++){let e=this.children[n];i.children[n]=e.____copy____(t,i,s)}}if(this.templates.length>0)for(i.templates=new Array(this.templates.length),n=0,r=this.templates.length;n<r;n++){let e=this.templates[n];i.templates[n]=e.____copy____(t,i,s)}return i}}class ut extends O{constructor(t=null,e,s,i){super(t,e,s,i),this.USE_SECURE=i.USE_HTTPS,this.named_elements={},this.template=null,this.prop=null,this.url=null,this.presets=i,this.receiver=null,this.query={},this.REQUESTING=!1,this.exports=null,this.filter_list=[],this.templates=[],this.is=0}destructor(){this.parent=null,this.receiver&&this.receiver.destructor();for(let t=0,e=this.templates.length;t<e;t++)this.templates[t].destructor();super.destructor()}load(t){if(super.load(t),this.data.url){let t=this.data.url.split(";");this.data.url=t[0];for(var e=1;e<t.length;e++){let s=t[e];switch(s[0]){case"p":this.url_parent_import=s.slice(1);break;case"q":this.url_query=s.slice(1);break;case"<":this.url_return=s.slice(1)}}}if(this.prop=this.data.prop,this.data.export&&(this.exports=this.data.export),this.model&&(t=this.model,this.model=null),t&&t instanceof T){if(this.schema&&t.schema!=this.schema)throw new Error(`Model Schema ${this.model.schema} does not match Case Schema ${presets.schemas[this.data.schema].schema}`);this.model=null,t.addView(this)}else this.schema&&(t=new this.schema).addView(this);if(!this.model)throw new Error(`No Model could be found for Case constructor! Case schema "${this.data.schema}", "${this.presets.schemas[this.data.schema]}"; Case model "${this.data.model}", "${this.presets.models[this.data.model]}";`);for(this.data.url&&(this.receiver=new I(this.data.url,this.url_return),this.receiver.setModel(t),this.request()),e=0;e<this.children.length;e++)this.children[e].load(this.model)}request(t){this.receiver.get(t,null,this.USE_SECURE).then(()=>{this.REQUESTING=!1}),this.REQUESTING=!0}updateSubs(t,e,s=!1){for(var i=0,n=t.length;i<n;i++){let n=t[i];if(0==n.is)n.update(e,!0);else{let t;if(s){if(n.import_prop&&e[n.import_prop]&&(t=n.update(e))){this.updateSubs(n.children,t);continue}}else t=n.update(e);this.updateSubs(n.children,t||e,s)}}}update(t,e=!1){if(!e){if(!t){if(!this.data_cache)return;t=this.data_cache}this.data_cache=t,this.updateDimensions()}if(this.updateSubs(this.children,t,e),this.templates.length>0)for(var s=0,i=this.templates.length;s<i;s++)this.templates[s].update(t,e);this.REQUESTING=!1}handleUrlUpdate(t){let e=null;if(t&&this.data.import)if(e={},"null"==this.data.import)e=t.getClass(),console.log(e);else for(var s=this.data.import.split(";"),i=0;i<s.length;i++){let a=s[i].split(":"),o=a[0],h=a[1].split("=>");var n=h[0],r=h[1];"root"==o&&(o=null),e[r]=t.get(o,n)}if(t&&this.data.url){let e={};if(this.url_query)for(s=this.url_query.split(";"),i=0;i<s.length;i++){let a=s[i].split(":"),o=a[0],h=a[1].split("=>");n=h[0],r=h[1],"root"==o&&(o=null),e[r]=t.get(o,n)}this.request(e)}this.model||(this.model=new this.model_constructor,this.getter&&this.getter.setModel(this.model),this.model.addView(this)),e&&this.model.add(e)||this.update(this.model.get())}transitionIn(t=0){let e=0;for(let s=0,i=this.templates.length;s<i;s++)e=Math.max(e,this.templates[s].transitionIn(t));return Math.max(e,super.transitionIn(t))}transitionOut(t=0){let e=0;for(let s=0,i=this.templates.length;s<i;s++)e=Math.max(e,this.templates[s].transitionOut(t));return Math.max(e,super.transitionOut(t))}finalizeTransitionOut(){for(let t=0,e=this.templates.length;t<e;t++)this.templates[t].finalizeTransitionOut();super.finalizeTransitionOut()}setActivating(){this.parent&&this.parent.setActivating()}getNamedElements(t){for(let e in this.named_elements)t[e]=this.named_elements[e]}}class ct extends ut{constructor(t,e,s){super(null,t)}}class mt extends O{constructor(t,e,s,i){super(t,e,s,i),this.prop=this.data.prop,this.import_prop=this.data.iprop,this.width=0,this.height=0,this.top=0,this.left=0,this.lvl=0,this.is=1,this.data_cache=null,this.children=[],"A"==this.element.tagName&&this.processLink(this.element)}destructor(){"A"==this.element.tagName&&this.destroyLink(this.element),this.data_cache=null,super.destructor()}processLink(t,e){t.origin===location.origin&&(t.onclick||(t.onclick=((t,e,s)=>i=>{i.preventDefault(),s(t,e)&&i.preventDefault()})(t.href,t,(t,e)=>{let s="",i=X(t);for(;i.token;){if("{"==i.token.text){i.next();let e=i.token.text;i.next(),s+=this[e]||this.data_cache[e],"}"!=i.token.text&&console.warn(`incorrect value found in url ${t}`)}else s+=i.token.text;i.next()}return this.bubbleLink(s),!0})),t.onmouseover=(()=>{let e=t.href,s="",i=X(e);for(;i.token;){if("{"==i.token.text){i.next();let t=i.token.text;i.next(),s+=this[t]||this.data_cache[t],"}"!=i.token.text&&console.warn(`incorrect value found in url ${e}`)}else s+=i.token.text;i.next()}}))}destroyLink(t){t.onclick=null,t.onmouseover=null}update(t){t&&(this.prop?(this.element.innerHTML=t[this.prop],this[this.prop]=t[this.prop]):this.data_cache=t)}load(t){this.children.forEach(e=>{e.load(t)}),this.data.model&&t.addView(this)}updateDimensions(){var t=this.element.getBoundingClientRect();this.width=t.width,this.height=t.height,this.top=t.top,this.left=t.left,super.updateDimensions()}}class pt extends mt{constructor(t,e,s,i){super(t,e,s,i),t.filter_list.push(t=>this.filter(t)),this.element.addEventListener("input",()=>{this.parent.update()})}update(t){}filter(t){return!1}}class _t extends mt{constructor(t,e,s,i){super(t,e,s,i)}update(t){t[this.prop]&&(this.element.innerHTML=t[this.prop],this.parent.revise())}get term(){return this.element.innerHTML}set term(t){}}class ft extends ut{constructor(t=null,e,s,i,n){if(super(t,e,s,i),this.cases=[],this.case_constructors=[],this.filters=[],this.range=null,this.terms=[],this.prop_elements=[],n)for(var r=0,a=n.length;r<a;r++){let t=n[r];t.IS_CASE?this.case_constructors.push(t):(t.Constructor==pt&&this.filters.push(t.____copy____(e,this)),t.Constructor==_t&&this.terms.push(t.____copy____(e,this)))}let o=document.createElement("div");e.parentElement.replaceChild(o,e),this.element=o,this.prop=this.data.prop}filterUpdate(){let t=this.cases.slice();for(let e=this.filters.length,s=0;s<e;s++)t=this.filters[s].filter(t);for(var e=0;e<t.length;e++)this.element.appendChild(t[e].element);this.element.style.position=this.element.style.position,setTimeout(()=>{for(var e=0;e<t.length;e++)t[e].transitionIn(e)})}cull(t){if(0==t.length){for(let t=0,e=this.cases.length;t<e;t++)this.cases[t].destructor();this.cases.length=0}else{let s=new Map(t.map(t=>[t,!0]));var e=[];for(let t=0,e=this.cases.length;t<e;t++)s.has(this.cases[t].model)?s.set(this.cases[t].model,!1):(this.cases[t].destructor(),this.cases.splice(t,1),e--,t--);s.forEach((t,s,i)=>{t&&e.push(s)}),e.length>0&&this.added(e)}}load(t){}removed(t){for(let e=0;e<t.length;e++){let s=t[e];for(let t=0;t<this.cases.length;t++){let e=this.cases[t];if(e.model==s){this.cases.splice(t,1),e.dissolve();break}}}this.filterUpdate()}added(t){for(let e=0;e<t.length;e++){let s=this.case_constructors[0].flesh(t[e]);this.cases.push(s)}this.filterUpdate()}revise(){this.cache&&this.update(this.cache)}getTerms(){let t=[];for(let e=0,s=this.terms.length;e<s;e++)t.push(this.terms[e].term);return 0==t.length?null:t}update(t,e=!1){if(e)for(let e=0,s=this.terms.length;e<s;e++)this.terms[e].update(t);else{if(!t.____self____)return;this.cache=t;let e=t[this.prop].get(this.getTerms());e instanceof v?(e.pin(),e.addView(this),this.cull(this.model.get(this.getTerms(),!0))):(e=t.____self____.data[this.prop])instanceof v&&(e.addView(this),this.cull(this.model.get(this.getTerms(),!0)))}}transitionIn(t,e){let s=0;for(let i=0,n=this.templates.length;i<n;i++)s=Math.max(s,this.templates[i].transitionIn(t,e));return Math.max(s,super.transitionIn()),s}transitionOut(){let t=0;for(let e=0,s=this.templates.length;e<s;e++)t=Math.max(t,this.templates[e].transitionOut());return Math.max(t,super.transitionOut()),t}}let gt=()=>{let t=null;return{get linker(){return t},set linker(e){t||(t=e)}}};class wt extends mt{constructor(t,e,s,i){super(t,e,s,i),this.submitted=!1,e.addEventListener("submit",e=>(console.log(e.target,this,t),this.submitted||this.submit(),this.submitted=!0,e.preventDefault(),!1))}destructor(){}accepted(t){t.text().then(e=>{gt.linker.loadPage(gt.linker.loadNewPage(t.url,(new DOMParser).parseFromString(e,"text/html")),!1)})}rejected(t){t.text().then(e=>{gt.linker.loadPage(gt.linker.loadNewPage(t.url,(new DOMParser).parseFromString(e,"text/html")),!1)})}update(t){}submit(){let t=this.element.action;var e=new FormData(this.element);console.log("Wick Form Submitted",t,e),fetch(t,{method:"post",credentials:"same-origin",body:e}).then(t=>{200!=t.status?this.rejected(t):this.accepted(t)}).catch(t=>{this.rejected(t)})}}let yt=$,vt=P,xt={raw:mt,cassette:mt,form:wt,input:class extends mt{constructor(t,e,s,i){super(t,e,s,i),this.element.display="none",this.element.addEventListener("input",()=>{var t={};t[this.prop]=this.element.value,this.parent.model.add(t)})}update(t){if(t[this.prop])switch(this.element.type){case"date":this.element.value=new Date(parseInt(t[this.prop])).toISOString().split("T")[0];break;case"time":this.element.value=`${("00"+(0|t[this.prop])).slice(-2)}:${("00"+t[this.prop]%1*60).slice(-2)}:00.000`;break;case"text":this.element.value=void 0!=t[this.prop]?t[this.prop]:"";break;default:switch(this.element.classList[0]){case"modulo_time":var e=t[this.prop],s=e/12>1,i=e%1*60|0,n=(0|e)%12!=0?(0|e)%12:12;this.element.value=n+":"+("0"+i).slice(-2)+(s?" PM":" AM");break;default:this.element.value=void 0!=t[this.prop]?t[this.prop]:""}}}},export:class extends mt{constructor(t,e,s,i){super(t,e,s,i),"A"==e.tagName&&e.addEventListener("click",()=>{this.event()})}event(){this.parent.export()}destructor(){this.element.removeEventListener("click",this.event),super.destructor()}},iquery:class extends mt{constructor(t,e,s,i){super(t,e,s,i),this.query=this.element.dataset.query}update(t){t[this.import_prop]&&(this.element.innerHTML=void 0!=t[this.import_prop]?t[this.import_prop]:"",this.query&&this.parent.query[this.query]!=t[this.import_prop]&&(this.parent.query[this.query]=t[this.import_prop],this.parent.request()))}},edt:class extends mt{constructor(t,e,s,i){super(t,e,s,i)}update(t){let e=t[this.prop],s=new Date(e);e&&s&&(this.element.innerHTML=s)}},eday:class extends mt{constructor(t,e,s,i){super(t,e,s,i),this.TO_UPPERCASE="true"==this.data.uppercase,this.limit=parseInt(this.data.limit)>0?parseInt(this.data.limit):0}update(t){let e=t[this.prop],s=new Date(e);if(e&&s){let t=yt[s.getDay()];t=this.limit>0?t.slice(0,this.limit):t,t=this.TO_UPPERCASE?t.toUpperCase():t,this.element.innerHTML=t}}},edate:class extends mt{constructor(t,e,s,i){super(t,e,s,i)}update(t){let e=t[this.prop],s=new Date(e);e&&s&&(this.element.innerHTML=s.getDate())}},eyear:class extends mt{constructor(t,e,s,i){super(t,e,s,i)}update(t){let e=t[this.prop],s=new Date(e);e&&s&&(this.element.innerHTML=s.getFullYear())}},emonth:class extends mt{constructor(t,e,s,i){super(t,e,s,i),this.TO_UPPERCASE="true"==this.data.uppercase,this.limit=parseInt(this.data.limit)>0?parseInt(this.data.limit):0}update(t){let e=t[this.prop],s=new Date(e);if(e&&s){let t=vt[s.getMonth()].name;t=this.limit>0?t.slice(0,this.limit):t,t=this.TO_UPPERCASE?t.toUpperCase():t,this.element.innerHTML=t}}},exists:class extends mt{constructor(t,e,s,i){super(t,e,s,i),this.defualt=e.getStyle("display"),this.temp=document.createElement("span")}update(t){t&&(t[this.prop]?this.temp.parentElement&&this.temp.parentElement.replaceChild(this.element,this.temp):this.element.parentElement&&this.element.parentElement.replaceChild(this.temp,this.element))}},not_exists:class extends mt{constructor(t,e,s,i){super(t,e,s,i),this.defualt=e.getStyle("display"),this.temp=document.createElement("span")}update(t){t&&(t[this.prop]?this.element.parentElement&&this.element.parentElement.replaceChild(this.temp,this.element):this.temp.parentElement&&this.temp.parentElement.replaceChild(this.element,this.temp))}},data_edit:class extends mt{constructor(t,e,s,i){super(t,e,s,i)}load(t){this.children.forEach(e=>{e.load(t)});let e=JSON.parse(this.element.value);e&&t.add(e),this.data.model&&t.addView(this)}update(t){}event(){this.parent.export()}destructor(){this.element.removeEventListener("click",this.event),super.destructor()}},term:_t};function bt(t,e,s){if(s)for(let i in e)t[i]=e[i],s.removeAttribute(`data-${i}`);else for(let s in e)t[s]=e[s]}function kt(t,e,s){let i;return t?t.skeleton?t.skeleton:(i=function t(e,s,i,n){var r=s.children;let a=[];var o=i.cassettes||{};if("TEMPLATE"==s.nodeName){let a;if((r=s.content.children).length<1)return(a=n.getElementById(s.classList[0])&&"TEMPLATE"==s.nodeName)?(a=a.cloneNode(!0),s.parentElement.replaceChild(a,s),t(e,a,i,n)):[];{(a=document.importNode(s.content,!0)).attributes=s.attributes;let r=s.parentElement;if(r)return r.replaceChild(a,s),t(e,a,i,n);s=a}}for(var h=0;h<r.length;h++){let l=r[h],d={},u=!1;bt(d,l.dataset);let c=d.class;d.transition&&(u=!0);let m=null;switch(l.tagName){case"TEMPLATE":let r=document.createElement("div"),p=document.importNode(l.content,!0);r.appendChild(p),s.replaceChild(r,l);let _=new dt(null,null,h,u,i);_.data=d;let f=t(e,r,i,n);_.Constructor=(t=>(class extends ft{constructor(e,s,i,n){super(e,s,i,n,t)}}))(f),e.templates.push(_);continue;case"CASE":if(m=c&&o[c]?o[c]:ut){(d.model||d.schema)&&(m=((t,e,s)=>(class extends t{constructor(t,n,r,a){super(t,n,r,a),this.model=i.models[e],this.schema=i.schemas[s]}}))(m,d.model,d.schema));let e=new dt(l,m,h,u,i);bt(d,s.dataset),e.data=d,e.IS_CASE=!0,e.children=t(e,l,i,n),a.push(e);continue}break;case"INPUT":if(m=o.input||xt.input){let e=new dt(null,m,h,u,i);e.data=d,e.children=t(e,l,i,n),a.push(e)}else console.warn("Missing input Constructor in presets, unable to process form data!");break;case"FORM":if(m=xt.form,c&&(form_class=o[c])&&form_class.prototype instanceof wt?m=form_class(parentCase,l):(o.form||xt.form)&&(m=o.form||xt.form),m){let e=new dt(null,m,h,u,i);e.data=d,a.push(e),e.children=t(e,l,i,e);continue}console.warn("Missing form Constructor in presets, unable to process form data!");break;default:if(c&&(o[c]||xt[c])&&(m=o[c]||xt[c]),m){let e=new dt(null,m,h,u,i);e.data=d,a.push(e),e.children=t(e,l,i,n);continue}}a=a.concat(t(e,l,i,n))}return a}(null,document.importNode(t,!0),e,s)[0])?(t.skeleton=(t=>e=>t.flesh(e))(i),t.skeleton):null:null}class Et{constructor(t){this.id=t.classList?t.classList[0]:t.id,this.components=[],this.bubbled_elements=null,this.wraps=[],this.element=t}unloadComponents(){for(var t=0;t<this.components.length;t++)this.components[t].LOADED=!1}transitionOut(){let t=0;for(var e=0;e<this.components.length;e++){let s=this.components[e];s.LOADED||(s.parent=null,t=Math.max(s.transitionOut(),t))}return t}finalize(){for(var t=0;t<this.components.length;t++){let e=this.components[t];!e.LOADED&&e.parentElement&&(e.finalizeTransitionOut(),this.wraps[t].removeChild(e.element)),e.LOADED=!1}}loadComponents(t){for(let e=0;e<this.components.length;e++){let s=this.components[e];s.parent=this,s.element.parentElement&&s.element.parentElement.removeChild(s.element),this.wraps[e].appendChild(s.element),s.handleUrlUpdate(t),this.components[e].LOADED=!0}}transitionIn(){let t=this.element.style.top;this.element.style.top=t;for(let t=0;t<this.components.length;t++)this.components[t].transitionIn()}bubbleLink(t,e,s={}){this.bubbled_elements=s,history.pushState({},"ignored title",t),window.onpopstate()}getTransformTo(t){if(t){let e={};this.getNamedElements(e);for(let s in e)t[s]=at(e[s])}}setTransformTo(t){if(t){let e={};this.getNamedElements(e);for(let s in e){let i,n=t[s];(i=e[s])&&n&&n(i,!1)}}}getNamedElements(t){if(this.bubbled_elements){this.bubbled_elements;for(let e in this.bubbled_elements)t[e]=this.bubbled_elements[e];return}let e=this.element.children;for(var s=0;s<e.length;s++){let i=e[s];i.dataset.transition&&(t[i.dataset.transition]=i)}for(s=0;s<this.components.length;s++)this.components[s].getNamedElements(t)}setComponents(t,e,s,i,n,r){var a=Array.prototype.map.call(this.element.getElementsByTagName("component"),t=>t);if(function(t,e){let s=t.getElementsByTagName("a");for(let t=0,i=s.length;t<i;t++){let i=s[t];i.dataset.ignore_link||i.origin===location.origin&&(i.onclick||(i.onclick=((t,e,s)=>i=>{i.preventDefault(),s(t,e)&&i.preventDefault()})(i.href,i,e)))}}(this.element,(t,e)=>(history.pushState({},"ignored title",t),window.onpopstate(),!0)),a.length<1){let t=document.createElement("div");t.classList.add("comp_wrap"),t.innerHTML=this.element.innerHTML}for(var o=n.getElementsByTagName("template"),h=0;h<a.length;h++){let m=null,p=a[h];try{let a=document.createElement("div");a.classList.add("comp_wrap"),this.wraps.push(a),p.parentElement.replaceChild(a,p);var l,d=p.classList[0];if(d){if(t[d])m=t[d];else{if(l=s[d]){if(m=new l.constructor(p,i,o),l.model_name&&e[l.model_name]){var u=e[l.model_name];u.getter&&u.getter.get(),u.addView(m)}m.id=d,t[d]=m}else{var c=o[d];if(c)m=kt(c,i,n)();else{let t=kt(p,i,n);t||(t=kt(p.children[0],i,n)),m=t?t():new Q(p)}}m?t[d]=m:(console.warn("App Component not constructed"),m=new K)}m.handleUrlUpdate(r)}else m=new Q(p)}catch(t){console.log(t),m=new K(t,i)}this.components.push(m)}}}let Mt={wurl:null},Tt={set:function(t,e,s){Mt.wurl&&Mt.wurl.set(t,e,s)},get:function(t,e){return Mt.wurl?Mt.wurl.set(t,e):null},goto:function(t,e){history.pushState({},"ignored title",`${t}${e?`?${m(e)}`:""}`),window.onpopstate()}};function At(){let t=document.getElementsByTagName("modals")[0];if(!t){t=document.createElement("modals");var e=document.getElementsByTagName("app")[0];e?e.parentElement.insertBefore(t,e):document.body.appendChild(t)}return t}class Ct{constructor(t){if(this.pages={},this.components={},this.component_constructors={},this.models_constructors={},this.presets=t,this.current_url=null,this.current_query,this.current_view=null,this.finalizing_pages=[],gt.linker=this,t.static)for(let e in t.static){let s=t.static[e],i=0,n=0,r=0,a=0;(i=s.prototype.transitionIn&&s.prototype.transitionIn instanceof Function)&&(n=s.prototype.transitionOut&&s.prototype.transitionOut instanceof Function)&&(r=s.prototype.setModel&&s.prototype.setModel instanceof Function)&&(a=s.prototype.unsetModel&&s.prototype.unsetModel instanceof Function)?this.addStatic(e,s):console.warn(`Static component ${e} lacks correct component methods, \nHas transitionIn function:${i}\nHas transitionOut functon:${n}\nHas set model function:${r}\nHas unsetModel function:${a}`)}if(t.parser)for(let e in t.page_parser)t.page_parser[e];t.schemas?t.schemas.any=A:t.schemas={any:A},t.models||(t.models={}),this.modal_stack=[],window.onpopstate=(()=>{this.parseURL(document.location)})}parseURL(t){let e=t.pathname,s=this.current_url==e,i=null,n=new _(t);if(this.current_url=e,i=this.pages[e])return s?(Mt.wurl=n,i.transitionIn("modal"==i.type?At():document.getElementsByTagName("app")[0],null,n,s)):this.loadPage(i,n,s);t&&fetch(t.href,{credentials:"same-origin",method:"GET"}).then(t=>{t.text().then(t=>{var i=(new DOMParser).parseFromString(t,"text/html");this.loadPage(this.loadNewPage(e,i,n),n,s)})}).catch(t=>{console.warn(`Unable to process response for request made to: ${this.url}. Response: ${t}. Error Received: ${t}`)})}finalizePages(){this.armed&&(this.armed,this.armed=null);for(var t=0,e=this.finalizing_pages.length;t<e;t++)this.finalizing_pages[t].finalize();this.finalizing_pages.length=0}loadPage(t,e=new _(document.location),s){Mt.wurl=e;let i=0,n=document.getElementsByTagName("app")[0],r={};if("modal"==t.type){if(s)return void t.transitionIn();let n=0;for(var a=0,o=this.modal_stack.length;a<o;a++){let e=this.modal_stack[a];if(0==n)e==t&&(n=a+1);else{let t=0;e.unload(),(t=e.transitionOut())?(i=Math.max(t,i),this.finalizing_pages.push(e)):e.finalize()}}n>0?(this.modal_stack.length=n,t.load(At(),e),t.transitionIn()):(this.modal_stack.push(t),t.load(At(),e),t.transitionIn())}else{for(a=0,o=this.modal_stack.length;a<o;a++){let t=this.modal_stack[a],e=0;t.unload(),(e=t.transitionOut())?(i=Math.max(e,i),this.finalizing_pages.push(t)):t.finalize()}if(this.modal_stack.length=0,this.current_view&&this.current_view!=t){this.current_view.unload(r),t.load(n,e);let s=this.current_view.transitionOut();window.requestAnimationFrame(()=>{t.transitionIn(r)}),i=Math.max(s,i),this.finalizing_pages.push(this.current_view)}else this.current_view||(t.load(n,e),window.requestAnimationFrame(()=>{t.transitionIn(r)}));this.current_view=t}setTimeout(()=>{this.finalizePages()},1e3*i+1)}addStatic(t,e,s){this.component_constructors[t]={constructor:e,model_name:s}}addModel(t,e){this.models_constructors[t]=e}loadNonWickPage(t){let e=document.createElement("iframe");e.src=t,e.classList.add("modal","comp_wrap");var s=new Z(t,e);return s.type="modal",this.pages[t]=s,this.pages[t]}loadNewPage(t,e,s){let i=!1,n=e.getElementsByTagName("app");n.length>1&&console.warn(`Wick is designed to work with just one <app> element in a page. There are ${n.length} apps elements in ${url}. Wick will proceed with the first <app> element in the DOM. Unexpected behavior may occur.`);let r=n[0];if(!r)return console.trace("Page does not have an <app> element!"),this.loadNonWickPage(t);var a=document.createElement("apppage");a.innerHTML=r.innerHTML;var o=r.cloneNode(!0),h=document.getElementsByTagName("app")[0],l=new Z(t,a);if(r){if("true"==r.dataset.modal){l.setType("modal");let t=document.createElement("modal");if(t.innerHTML=o.innerHTML,o.innerHTML="",o=t,e==document&&h){let t=document.createElement("app");document.body.replaceChild(t,h),h=t}}"true"==o.dataset.no_buffer&&(i=!0);for(var d=a.getElementsByTagName("element"),u=0;u<d.length;u++){let t,i=d[u],n=i.id;if("modal"!==l.type)t=new Et(i);else{let e=document.createElement("div");e.innerHTML=i.innerHTML,e.classList.add("ele_wrap"),t=new Et(i)}l.elements.push(t),this.components[n]||(this.components[n]={}),t.setComponents(this.components[n],this.models_constructors,this.component_constructors,this.presets,e,s)}document==e&&(h.innerHTML="");let n=l;return i||(this.pages[t]=n),n}}}s.d(e,"light",function(){return Lt}),s.d(e,"URL",function(){return Tt}),s.d(e,"Animation",function(){return n}),s.d(e,"ArrayModelContainer",function(){return b}),s.d(e,"BinaryTreeModelContainer",function(){return k}),s.d(e,"MultiIndexedContainer",function(){return x}),s.d(e,"Controller",function(){return C}),s.d(e,"CustomCase",function(){return ct}),s.d(e,"Cassette",function(){return mt}),s.d(e,"Form",function(){}),s.d(e,"Filter",function(){}),s.d(e,"Common",function(){return i}),s.d(e,"Component",function(){}),s.d(e,"DateModelContainer",function(){return E}),s.d(e,"Getter",function(){return I}),s.d(e,"Linker",function(){return Ct}),s.d(e,"Model",function(){return T}),s.d(e,"ModelContainer",function(){return v}),s.d(e,"Setter",function(){return D}),s.d(e,"View",function(){return f});let It=" (  (                    )\n )\\))(   ' (          ( /(\n((_)()\\ )  )\\    (    )\\())\n_(())\\_)()((_)   )\\  ((_)\\\n\\ \\((_)/ / (_)  ((_) | |(_)\n \\ \\/\\/ /  | | / _|  | / /\n  \\_/\\_/   |_| \\__|  |_\\_\\\n",Dt=!1,St=!0;function Lt(t){if(St&&console.log(t),Dt)return;Dt=!0;let e=new Ct(t||{});window.addEventListener("load",()=>{e.loadPage(e.loadNewPage(document.location.pathname,document),new _(document.location),!1)}),console.log(`${It}Copyright 2018 Anthony C Weathersby\nhttps://gitlab.com/anthonycweathersby/wick`)}}]);